import{C as We}from"./regular-expressions.11563385.js";import{u as L,r as s,a as R,F as me,s as Et,b as bt,c as ze,d as ye,e as U,f as xt,S as vt,g as ne,h as ce,o as Ne,i as le,j as yt,k as _,l as Be,m as Ue,n as S,R as Nt,p as we,q as ie,t as O,C as wt,v as kt,w as St,x as $e,y as Qe,z as Ct,A as It,B as e,D as At,E as Tt,G as Rt,H as Mt,I as Ve,J as Ge,K as Lt,L as je,M as Fe,N as Bt,O as $t,P as jt,Q as Ft,T as Ot,U as Pt,V as Dt,W as ke,X as Ke,Y as _t,Z as Ht,_ as qt,$ as Wt,a0 as zt,a1 as Ut,a2 as Qt}from"./Toasts.dd02bba4.js";function Xe(t){const a=L(),[n,r]=s.exports.useState(!1),[l,o]=s.exports.useState(!1),{cbUsername:c,cbPassword:d}=R(m=>m.userSettings),{cbAddress:h}=R(m=>m.boardSettings),E=m=>{m.target.value.includes("retina")?o(!0):o(!1)},f=()=>{r(!0),setTimeout(()=>{r(!1)},2e3)};return s.exports.createElement("div",{"data-test":"auth",className:"container"},!t.headerLess&&s.exports.createElement("header",{className:"text-center mb-5"},s.exports.createElement("h2",null,"codebeamer cards"),s.exports.createElement("p",null,s.exports.createElement("span",{className:"icon icon-plug pos-adjusted-down"}),s.exports.createElement("span",{className:"ml-small"},"Connect to your codebeamer Instance"))),s.exports.createElement("div",null,s.exports.createElement(me,{initialValues:{cbAddress:h,cbUsername:c,cbPassword:d},enableReinitialize:!0,validate:m=>{const u={};if(!m.cbAddress)u.cbAddress="Required";else if(m.cbAddress){const p=/^https?:\/\/[a-z0-9\.]*\/cb$/;m.cbAddress.match(p)||(u.cbAddress="Not a valid CB Address! Must specify the protocol (HTTP(S)) and end with /cb")}if(m.cbUsername||(u.cbUsername="Required"),m.cbPassword||(u.cbPassword="Required"),Object.keys(u).length)return u},onSubmit:async(m,{setSubmitting:u})=>{u(!0),a(Et(m.cbAddress)),a(bt({username:m.cbUsername,password:m.cbPassword})),m.cbAddress!=h&&(a(ze("")),a(ye(""))),t.successAnimation&&f()}},({values:m,errors:u,touched:p,handleChange:b,handleSubmit:y,isSubmitting:C})=>s.exports.createElement("form",{onSubmit:y},s.exports.createElement("div",{className:`form-group ${p.cbAddress?u.cbAddress?"error":"success":""}`},s.exports.createElement("label",null,"CodeBeamer Address"),s.exports.createElement(U,{type:"text",name:"cbAddress",className:"input",onChange:i=>{b(i),E(i)},"data-test":"cbAddress"}),u.cbAddress&&p.cbAddress&&s.exports.createElement("div",{className:"status-text","data-test":"cbAddressErrors"},u.cbAddress),l&&s.exports.createElement("div",{className:"status-text muted","data-test":"rcnHint"},"RCN connection required")),s.exports.createElement("div",{className:`form-group ${p.cbUsername&&u.cbUsername?"error":""}`},s.exports.createElement("label",null,"CB Username"),s.exports.createElement(U,{type:"text",name:"cbUsername",className:"input","data-test":"cbUsername"}),u.cbUsername&&p.cbUsername&&s.exports.createElement("div",{className:"status-text"},u.cbUsername)),s.exports.createElement("div",{className:`form-group ${p.cbPassword&&u.cbPassword?"error":""}`},s.exports.createElement("label",null,"CB Password"),s.exports.createElement(U,{type:"password",name:"cbPassword",className:"input","data-test":"cbPassword"}),u.cbPassword&&p.cbPassword&&s.exports.createElement("div",{className:"status-text"},u.cbPassword)),s.exports.createElement("div",{className:"flex-centered mt-4"},!n&&s.exports.createElement("button",{type:"submit",disabled:C||t.loading,className:`fade-in button button-primary ${C||t.loading?"button-loading":""}`,"data-test":"submit"},"Connect"),n&&s.exports.createElement("span",null,s.exports.createElement("svg",{className:"checkmark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52"},s.exports.createElement("circle",{className:"checkmark__circle",cx:"26",cy:"26",r:"25",fill:"none"}),s.exports.createElement("path",{className:"checkmark__check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"}))))))))}function Ye(t){const a=L(),[n,r]=s.exports.useState(!1),[l,o]=s.exports.useState(),{cbAddress:c,projectId:d}=R(p=>p.boardSettings),[h,E]=s.exports.useState(d.toString()),[f,m]=xt(d);s.exports.useEffect(()=>{f()},[c]),s.exports.useEffect(()=>{var p,b;m.data&&E((b=(p=m.data.find(y=>y.id==d))==null?void 0:p.name)!=null?b:d.toString())},[m.data]);const u=()=>{r(!0),setTimeout(()=>{r(!1)},2e3)};return s.exports.createElement("div",{"data-test":"project-selection",className:"container project-selection"},!t.headerLess&&s.exports.createElement("header",{className:"text-center mb-5"},s.exports.createElement("h3",{className:"h3"},"Project selection"),s.exports.createElement("p",null,"Select your Project")),s.exports.createElement("div",{className:"mt-3"},s.exports.createElement(vt,{className:"basic-single",classNamePrefix:"select",options:m.data,isLoading:m.isLoading,isSearchable:!0,isClearable:!0,value:{id:l,name:h},getOptionLabel:p=>p.name,getOptionValue:p=>{var b,y;return(y=(b=p.id)==null?void 0:b.toString())!=null?y:"-1"},onChange:p=>{p&&(o(p.id),E(p.name))},maxMenuHeight:180}),s.exports.createElement("span",{className:"muted-medium","data-test":"cb-context"},"Projects from: ",c),s.exports.createElement("div",{className:"flex-centered mt-4"},!n&&s.exports.createElement("button",{type:"submit",disabled:!l,className:"fade-in button button-primary","data-test":"submit",onClick:()=>{if(!l){a(ne({header:"No value provided for the Project",content:"This is probably due to an internal error. Please contact support!",bg:"danger"}));return}a(ze(l)),a(ye("")),u()}},"Confirm"),n&&s.exports.createElement("span",{"data-test":"user-feedback"},s.exports.createElement("svg",{className:"checkmark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52"},s.exports.createElement("circle",{className:"checkmark__circle",cx:"26",cy:"26",r:"25",fill:"none"}),s.exports.createElement("path",{className:"checkmark__check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"}))))))}var de;function Oe(t){if((!de&&de!==0||t)&&ce){var a=document.createElement("div");a.style.position="absolute",a.style.top="-9999px",a.style.width="50px",a.style.height="50px",a.style.overflow="scroll",document.body.appendChild(a),de=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return de}function Vt(){return s.exports.useState(null)}function he(t){t===void 0&&(t=Ne());try{var a=t.activeElement;return!a||!a.nodeName?null:a}catch{return t.body}}function Pe(t,a){if(t.contains)return t.contains(a);if(t.compareDocumentPosition)return t===a||!!(t.compareDocumentPosition(a)&16)}function Gt(t){var a=s.exports.useRef(null);return s.exports.useEffect(function(){a.current=t}),a.current}const Kt="data-rr-ui-";function Xt(t){return`${Kt}${t}`}function Yt(t=document){const a=t.defaultView;return Math.abs(a.innerWidth-t.documentElement.clientWidth)}const De=Xt("modal-open");class Se{constructor({ownerDocument:a,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=a}getScrollbarWidth(){return Yt(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(a){}removeModalAttributes(a){}setContainerStyle(a){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",l=this.getElement();a.style={overflow:l.style.overflow,[r]:l.style[r]},a.scrollBarWidth&&(n[r]=`${parseInt(le(l,r)||"0",10)+a.scrollBarWidth}px`),l.setAttribute(De,""),le(l,n)}reset(){[...this.modals].forEach(a=>this.remove(a))}removeContainerStyle(a){const n=this.getElement();n.removeAttribute(De),Object.assign(n.style,a.style)}add(a){let n=this.modals.indexOf(a);return n!==-1||(n=this.modals.length,this.modals.push(a),this.setModalAttributes(a),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(a){const n=this.modals.indexOf(a);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(a))}isTopModal(a){return!!this.modals.length&&this.modals[this.modals.length-1]===a}}const Ze=s.exports.createContext(ce?window:void 0);Ze.Provider;function Je(){return s.exports.useContext(Ze)}const Ee=(t,a)=>{var n;return ce?t==null?(a||Ne()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(n=t)!=null&&n.nodeType&&t||null):null};function Zt(t,a){const n=Je(),[r,l]=s.exports.useState(()=>Ee(t,n==null?void 0:n.document));if(!r){const o=Ee(t);o&&l(o)}return s.exports.useEffect(()=>{a&&r&&a(r)},[a,r]),s.exports.useEffect(()=>{const o=Ee(t);o!==r&&l(o)},[t,r]),r}const Jt=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function ea(t,a){if(t==null)return{};var n={},r=Object.keys(t),l,o;for(o=0;o<r.length;o++)l=r[o],!(a.indexOf(l)>=0)&&(n[l]=t[l]);return n}let be;function ta(t){return be||(be=new Se({ownerDocument:t==null?void 0:t.document})),be}function aa(t){const a=Je(),n=t||ta(a),r=s.exports.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:s.exports.useCallback(l=>{r.current.dialog=l},[]),setBackdropRef:s.exports.useCallback(l=>{r.current.backdrop=l},[])})}const et=s.exports.forwardRef((t,a)=>{let{show:n=!1,role:r="dialog",className:l,style:o,children:c,backdrop:d=!0,keyboard:h=!0,onBackdropClick:E,onEscapeKeyDown:f,transition:m,backdropTransition:u,autoFocus:p=!0,enforceFocus:b=!0,restoreFocus:y=!0,restoreFocusOptions:C,renderDialog:i,renderBackdrop:w=k=>S.exports.jsx("div",Object.assign({},k)),manager:x,container:v,onShow:M,onHide:A=()=>{},onExit:$,onExited:B,onExiting:Q,onEnter:V,onEntering:G,onEntered:H}=t,g=ea(t,Jt);const T=Zt(v),I=aa(x),P=yt(),se=Gt(n),[q,K]=s.exports.useState(!n),D=s.exports.useRef(null);s.exports.useImperativeHandle(a,()=>I,[I]),ce&&!se&&n&&(D.current=he()),!m&&!n&&!q?K(!0):n&&q&&K(!1);const X=_(()=>{if(I.add(),re.current=Be(document,"keydown",fe),Y.current=Be(document,"focus",()=>setTimeout(W),!0),M&&M(),p){const k=he(document);I.dialog&&k&&!Pe(I.dialog,k)&&(D.current=k,I.dialog.focus())}}),j=_(()=>{if(I.remove(),re.current==null||re.current(),Y.current==null||Y.current(),y){var k;(k=D.current)==null||k.focus==null||k.focus(C),D.current=null}});s.exports.useEffect(()=>{!n||!T||X()},[n,T,X]),s.exports.useEffect(()=>{!q||j()},[q,j]),Ue(()=>{j()});const W=_(()=>{if(!b||!P()||!I.isTopModal())return;const k=he();I.dialog&&k&&!Pe(I.dialog,k)&&I.dialog.focus()}),pe=_(k=>{k.target===k.currentTarget&&(E==null||E(k),d===!0&&A())}),fe=_(k=>{h&&k.keyCode===27&&I.isTopModal()&&(f==null||f(k),k.defaultPrevented||A())}),Y=s.exports.useRef(),re=s.exports.useRef(),ge=(...k)=>{K(!0),B==null||B(...k)},Z=m;if(!T||!(n||Z&&!q))return null;const oe=Object.assign({role:r,ref:I.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},g,{style:o,className:l,tabIndex:-1});let z=i?i(oe):S.exports.jsx("div",Object.assign({},oe,{children:s.exports.cloneElement(c,{role:"document"})}));Z&&(z=S.exports.jsx(Z,{appear:!0,unmountOnExit:!0,in:!!n,onExit:$,onExiting:Q,onExited:ge,onEnter:V,onEntering:G,onEntered:H,children:z}));let J=null;if(d){const k=u;J=w({ref:I.setBackdropRef,onClick:pe}),k&&(J=S.exports.jsx(k,{appear:!0,in:!!n,children:J}))}return S.exports.jsx(S.exports.Fragment,{children:Nt.createPortal(S.exports.jsxs(S.exports.Fragment,{children:[J,z]}),T)})});et.displayName="Modal";const na=Object.assign(et,{Manager:Se});function sa(t,a){return t.classList?!!a&&t.classList.contains(a):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+a+" ")!==-1}function ra(t,a){t.classList?t.classList.add(a):sa(t,a)||(typeof t.className=="string"?t.className=t.className+" "+a:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+a))}var oa=Function.prototype.bind.call(Function.prototype.call,[].slice);function te(t,a){return oa(t.querySelectorAll(a))}function _e(t,a){return t.replace(new RegExp("(^|\\s)"+a+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function la(t,a){t.classList?t.classList.remove(a):typeof t.className=="string"?t.className=_e(t.className,a):t.setAttribute("class",_e(t.className&&t.className.baseVal||"",a))}const ae={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class ca extends Se{adjustAndStore(a,n,r){const l=n.style[a];n.dataset[a]=l,le(n,{[a]:`${parseFloat(le(n,a))+r}px`})}restore(a,n){const r=n.dataset[a];r!==void 0&&(delete n.dataset[a],le(n,{[a]:r}))}setContainerStyle(a){super.setContainerStyle(a);const n=this.getElement();if(ra(n,"modal-open"),!a.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",l=this.isRTL?"marginLeft":"marginRight";te(n,ae.FIXED_CONTENT).forEach(o=>this.adjustAndStore(r,o,a.scrollBarWidth)),te(n,ae.STICKY_CONTENT).forEach(o=>this.adjustAndStore(l,o,-a.scrollBarWidth)),te(n,ae.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(l,o,a.scrollBarWidth))}removeContainerStyle(a){super.removeContainerStyle(a);const n=this.getElement();la(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",l=this.isRTL?"marginLeft":"marginRight";te(n,ae.FIXED_CONTENT).forEach(o=>this.restore(r,o)),te(n,ae.STICKY_CONTENT).forEach(o=>this.restore(l,o)),te(n,ae.NAVBAR_TOGGLER).forEach(o=>this.restore(l,o))}}let xe;function ia(t){return xe||(xe=new ca(t)),xe}const da=we("modal-body"),ma=s.exports.createContext({onHide(){}}),tt=ma,at=s.exports.forwardRef(({bsPrefix:t,className:a,contentClassName:n,centered:r,size:l,fullscreen:o,children:c,scrollable:d,...h},E)=>{t=ie(t,"modal");const f=`${t}-dialog`,m=typeof o=="string"?`${t}-fullscreen-${o}`:`${t}-fullscreen`;return S.exports.jsx("div",{...h,ref:E,className:O(f,a,l&&`${t}-${l}`,r&&`${f}-centered`,d&&`${f}-scrollable`,o&&m),children:S.exports.jsx("div",{className:O(`${t}-content`,n),children:c})})});at.displayName="ModalDialog";const nt=at,ua=we("modal-footer"),pa={closeLabel:"Close",closeButton:!1},st=s.exports.forwardRef(({closeLabel:t,closeVariant:a,closeButton:n,onHide:r,children:l,...o},c)=>{const d=s.exports.useContext(tt),h=_(()=>{d==null||d.onHide(),r==null||r()});return S.exports.jsxs("div",{ref:c,...o,children:[l,n&&S.exports.jsx(wt,{"aria-label":t,variant:a,onClick:h})]})});st.defaultProps=pa;const fa=st,ga={closeLabel:"Close",closeButton:!1},Ce=s.exports.forwardRef(({bsPrefix:t,className:a,...n},r)=>(t=ie(t,"modal-header"),S.exports.jsx(fa,{ref:r,...n,className:O(a,t)})));Ce.displayName="ModalHeader";Ce.defaultProps=ga;const ha=Ce,Ea=t=>s.exports.forwardRef((a,n)=>S.exports.jsx("div",{...a,ref:n,className:O(a.className,t)})),ba=Ea("h4"),xa=we("modal-title",{Component:ba}),va={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:nt};function ya(t){return S.exports.jsx(Qe,{...t,timeout:null})}function Na(t){return S.exports.jsx(Qe,{...t,timeout:null})}const Ie=s.exports.forwardRef(({bsPrefix:t,className:a,style:n,dialogClassName:r,contentClassName:l,children:o,dialogAs:c,"aria-labelledby":d,"aria-describedby":h,"aria-label":E,show:f,animation:m,backdrop:u,keyboard:p,onEscapeKeyDown:b,onShow:y,onHide:C,container:i,autoFocus:w,enforceFocus:x,restoreFocus:v,restoreFocusOptions:M,onEntered:A,onExit:$,onExiting:B,onEnter:Q,onEntering:V,onExited:G,backdropClassName:H,manager:g,...T},I)=>{const[P,se]=s.exports.useState({}),[q,K]=s.exports.useState(!1),D=s.exports.useRef(!1),X=s.exports.useRef(!1),j=s.exports.useRef(null),[W,pe]=Vt(),fe=kt(I,pe),Y=_(C),re=St();t=ie(t,"modal");const ge=s.exports.useMemo(()=>({onHide:Y}),[Y]);function Z(){return g||ia({isRTL:re})}function oe(N){if(!ce)return;const ee=Z().getScrollbarWidth()>0,Le=N.scrollHeight>Ne(N).documentElement.clientHeight;se({paddingRight:ee&&!Le?Oe():void 0,paddingLeft:!ee&&Le?Oe():void 0})}const z=_(()=>{W&&oe(W.dialog)});Ue(()=>{$e(window,"resize",z),j.current==null||j.current()});const J=()=>{D.current=!0},k=N=>{D.current&&W&&N.target===W.dialog&&(X.current=!0),D.current=!1},Re=()=>{K(!0),j.current=It(W.dialog,()=>{K(!1)})},ct=N=>{N.target===N.currentTarget&&Re()},it=N=>{if(u==="static"){ct(N);return}if(X.current||N.target!==N.currentTarget){X.current=!1;return}C==null||C()},dt=N=>{!p&&u==="static"?(N.preventDefault(),Re()):p&&b&&b(N)},mt=(N,ee)=>{N&&oe(N),Q==null||Q(N,ee)},ut=N=>{j.current==null||j.current(),$==null||$(N)},pt=(N,ee)=>{V==null||V(N,ee),Ct(window,"resize",z)},ft=N=>{N&&(N.style.display=""),G==null||G(N),$e(window,"resize",z)},gt=s.exports.useCallback(N=>S.exports.jsx("div",{...N,className:O(`${t}-backdrop`,H,!m&&"show")}),[m,H,t]),Me={...n,...P};Me.display="block";const ht=N=>S.exports.jsx("div",{role:"dialog",...N,style:Me,className:O(a,t,q&&`${t}-static`),onClick:u?it:void 0,onMouseUp:k,"aria-label":E,"aria-labelledby":d,"aria-describedby":h,children:S.exports.jsx(c,{...T,onMouseDown:J,className:r,contentClassName:l,children:o})});return S.exports.jsx(tt.Provider,{value:ge,children:S.exports.jsx(na,{show:f,ref:fe,backdrop:u,container:i,keyboard:!0,autoFocus:w,enforceFocus:x,restoreFocus:v,restoreFocusOptions:M,onEscapeKeyDown:dt,onShow:y,onHide:C,onEnter:mt,onEntering:pt,onEntered:A,onExit:ut,onExiting:B,onExited:ft,manager:Z(),transition:m?ya:void 0,backdropTransition:m?Na:void 0,renderBackdrop:gt,renderDialog:ht})})});Ie.displayName="Modal";Ie.defaultProps=va;const F=Object.assign(Ie,{Body:da,Header:ha,Title:xa,Footer:ua,Dialog:nt,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});function wa(t){var a;return e.createElement("div",{tabIndex:0,className:`tab ${t.active?"tab-active":""}`,"data-test":"wrapper"},e.createElement("div",{className:"tab-text tab-badge","data-badge":(a=t.dataBadge)!=null?a:"","data-test":"content"},t.icon&&e.createElement("span",{className:`clickable icon icon-${t.icon}`,"data-test":"icon"}," "),t.title))}function ka(t){var o;const[a,n]=s.exports.useState((o=t.initiallySelectedIndex)!=null?o:0),r=c=>{n(c)},l={width:1/t.tabs.length*100+"%"};return e.createElement(e.Fragment,null,e.createElement("div",{className:"tabs"},e.createElement("div",{className:"tabs-header-list"},t.tabs.map((c,d)=>e.createElement("div",{key:d,onClick:()=>r(d),style:l,"data-test":`tab-header-${d}`},e.createElement(wa,{title:c.title,icon:c.icon,active:a===d}))))),e.createElement("div",{className:"tab-content my-2","data-test":"tab-content"},t.tabs[a].tab))}const Ae=100,ue=1,Sa=13;function Ca(){const t=L(),{cardTagConfiguration:a}=R(i=>i.boardSettings),[n,r]=s.exports.useState([]),[l,o]=s.exports.useState(!1),[c,d]=s.exports.useState(!1),[h,E]=s.exports.useState([]),[f,m,u]=At(),p=["Summary","Description","Status"],b=Object.values(Tt);e.useEffect(()=>{const i=Object.keys(a.standard);let w=[];for(let x of i)a.standard[x]==!0&&w.push(x);r(w)},[a]);const y=i=>{var w;return e.createElement("div",{className:"property",key:i},e.createElement("label",{className:"checkbox","data-test":`tag-${i.replace(" ","-")}`},e.createElement("input",{type:"checkbox",checked:(w=a.standard[i])!=null?w:!1,onChange:()=>t(Mt({property:i,value:!a.standard[i]}))}),e.createElement("span",null,i)))},C=async()=>{o(!0);const i=await miro.board.get({type:"app_card"});if(!i||!i.length){o(!1),t(ne({header:"No items on the board to apply to",bg:"light",delay:2500}));return}const w=i.map(x=>{let v=x;const M=v.title.match(We);if(!(M!=null&&M.length))return console.error("Couldn't extract ID from Card title. Can't sync!"),{appCardId:v.id,itemId:""};const A=M[1];return{appCardId:v.id,itemId:A}});E(w),f({page:ue,pageSize:Ae,queryString:`item.id IN (${w.map(x=>x.itemId).join(",")})`})};return e.useEffect(()=>{m.error&&o(!1),m.data&&(async w=>{var v,M;const x=structuredClone(w);for(let A=0;A<x.length;A++){if((v=x[A].categories)!=null&&v.length&&x[A].categories.find(B=>B.name=="Folder"||B.name=="Information"))continue;const $=(M=h.find(B=>B.itemId==x[A].id.toString()))==null?void 0:M.appCardId;if(!$){t(ne({header:"Failed updating an item",content:`<p>
										Failed updating card for Item 
										${x[A].name}
									</p>`,bg:"warning",delay:2500}));continue}await Ve(x[A],$,!0)}})(m.data.items).then(()=>{o(!1),d(!0),setTimeout(()=>{d(!1)},2e3)})},[m]),e.createElement("div",{className:"flex-col"},e.createElement("div",null,e.createElement("p",{className:"muted-medium"},"Select the properties you want to be displayed as Tags on the imported Items' Cards.",e.createElement("br",null),"Items that don't have a selected property won't display the tag for it.")),e.createElement("div",{className:"my-2 grid"},e.createElement("div",{className:"cs1 ce6 border-right-light"},p.map(i=>e.createElement("div",{className:"property",key:i},e.createElement("label",{className:"checkbox",title:"Default property","data-test":`defaultTag-${i}`},e.createElement("input",{type:"checkbox",disabled:!0,checked:!0}),e.createElement("span",{className:"muted-medium"},i)))),b.filter((i,w)=>w%2==1).map(i=>y(i))),e.createElement("div",{className:"cs7 ce12"},b.filter((i,w)=>w%2==0).map(i=>y(i)))),e.createElement("div",{className:"text-center"},!c&&e.createElement("button",{className:`button button-primary button-small mt-5 ${l?"button-loading":""}`,onClick:()=>C(),"data-test":"apply"},"Apply"),c&&e.createElement("span",null,e.createElement("svg",{className:"checkmark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52"},e.createElement("circle",{className:"checkmark__circle",cx:"26",cy:"26",r:"25",fill:"none"}),e.createElement("path",{className:"checkmark__check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})))),e.createElement("hr",null),e.createElement("div",{className:"align-self-center mt-3"},e.createElement("h3",{className:"h3"},"Card Preview"),e.createElement("div",{className:"app-card"},e.createElement("h1",{className:"app-card--title"},e.createElement("a",{href:"#"},"Sample Item [TRKR-1248]")),e.createElement("h1",{className:"app-card--description p-medium"},"The Item's description will be rendered as HTML, as far as supported by Miro."),e.createElement("div",{className:"app-card--body"},e.createElement("div",{className:"app-card--tags"},n.map(i=>e.createElement("span",{className:"tag",key:i,style:{color:"#ffffff",backgroundColor:Rt(i)}},i,": ",Ia[i]))),e.createElement("svg",{className:"app-card--app-logo",enableBackground:"new 0 0 256 256",version:"1.1",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},e.createElement("path",{d:"m142.7 103.9c1.4 12.6 2.6 29.3 21.5 18.5 0.5-0.2 0.9-0.5 1.2-0.7 4.5-6.7-0.2-20.9 5.1-20 5.9 1-1.2 7.6 1.8 12.7 3.1-2.1 3.6-11 7.9-8.3 4.2 2.6-3.4 5.6-3.7 8.9 2.7 1.4 10.4-6 11.4-0.7 0.9 4-9.3 3.4-10.3 5.4 2.1 3.3 12.7 0.7 10.1 6-2.2 4.4-9.4-3.3-13.6-2 1.2 3.7 8.9 4.4 5.7 8-2.9 3.3-6.8-2.5-11.7-7.1-0.6 0.7-1.2 1.4-1.9 2.1-11.9 11.9-26 8.9-33.2-3.5-3.5-6-3.3-9.7-4.3-16.2-1.3 4-2.2 7.8-2.6 11.6-10.5 9.2-19.8 19.1-22.8 34.2 7-5.5 13.6-13.1 20.4-9.8 6.4 3.1 11.4 12.6 13.6 20.2 6.1-2.8 11.2-5.8 12.8-1.6 1.9 5.3-6.8 2.8-9.6 6.4 4 3.1 15.1-2.4 15.7 3.3 0.7 6.9-9.9-0.4-13.6 2.4 0.3 2.6 11.6 6.1 9.1 10.1-3.4 5.3-8.9-5.9-12.3-5.6-1.1 3.8 5.9 10.1 0.3 11.3-5.9 1.2-2.7-8.7-5.2-12.3-5.4 4.2-0.3 14.4-7.2 13.1-6-1.2 4-13.8 2.9-23-2.8-3.3-5.9-6.5-8.9-5.4-6.3 2.5-6.7 9.3-17.9 13.6 8.8 17 33.4 33.9 57.1 32.4 21.4-1.4 46-18.3 36.6-55.5-1.2-4.7-1-6.5 2.1-0.7 14.2 26.8-4.8 72.1-54.3 66.8-58.6-6.2-63.2-56.8-81.2-61.2-4-1-8.1 3.1-11.7 6.2 0.4 8.3 5.1 17.8-0.4 18.4-5.2 0.6-1-6.8-3.7-10.1-3.7 2.9-1.1 14.3-6.5 13.5-6.4-0.9 2.6-8.9 0.8-12.8-2.5-0.3-8.1 9.2-11.2 6-4.2-4.3 7.3-6.7 7.7-9.9-3.2-1.8-10.6 3.2-10.4-2.2 0.2-5.5 8.5-0.5 12.4-2-2.7-5.9-13.1-3.5-10.4-9.5 1.8-3.9 7.4 1.8 13.8 5.3 2-8.1 11.3-21.4 18-21.9 5.4-0.4 9.9 4.1 14.4 8.9-0.2-2.6-0.2-5.2-0.1-7.9 0.5-24.5 9.5-46.2 44.9-61.1 1.4-10.4-9.9-13.4-8-20.8 1.6-5.7 9.5-10.9 16.3-12.7-2.9-5.5-6.5-10.2-2.8-11.9 4.4-2 2.8 5.7 6.1 7.8 2.4-3.6-3-12.7 1.9-13.6 5.8-1 0.2 8.4 2.9 11.4 2.2-0.4 4.4-10.3 8-8.4 4.8 2.6-4.5 7.9-3.9 10.8 3.3 0.7 8.2-5.7 9.6-1 1.4 4.9-7.3 2.8-10.2 5.2 3.9 4.4 12.3-0.5 11.6 5.4-0.6 4.9-10.8-1.8-18.5-1.2-3.3 2.5-7.2 6.1-7 9.4 0.3 5 6.7 9 10.6 13.4 7.4-3.2 6.6-10.9 12-13.8 20-11 51.4 6.3 51.6 14.9 0.1 8.2-17.3 19.7-32.1 23.2-3.5 0.8-6.1-0.5-8.4-1.8-8.8-5.3-11.7 3.1-18.3 9.4",fill:"#000"}))))))}const Ia={ID:"124926",Teams:"Beavers, Zebras",Owner:"aurech",Versions:"PI 3.2",Priority:"Medium","Story Points":"8",Subjects:"A big feature","Start Date":"2022-03-15","End Date":"2022-04-02","Assigned To":"urecha","Assigned At":"2022-03-05","Submitted At":"2022-02-27","Submitted By":"aurech","Modified At":"2022-04-01","Modified By":"urecha"};function Aa(t){const a=[{title:"Card Tags",tab:e.createElement(Ca,null)},{title:"Project",tab:e.createElement(Ye,null)},{title:"Connection",tab:e.createElement(Xe,{headerLess:!0,successAnimation:!0})}];return e.createElement(F,{show:!0,centered:!0},e.createElement(F.Header,{closeButton:t.onClose!==void 0,onHide:()=>{t.onClose&&t.onClose()}},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ionIcon pos-adjusted-up",viewBox:"0 0 512 512"},e.createElement("title",null,"Settings"),e.createElement("path",{d:"M262.29 192.31a64 64 0 1057.4 57.4 64.13 64.13 0 00-57.4-57.4zM416.39 256a154.34 154.34 0 01-1.53 20.79l45.21 35.46a10.81 10.81 0 012.45 13.75l-42.77 74a10.81 10.81 0 01-13.14 4.59l-44.9-18.08a16.11 16.11 0 00-15.17 1.75A164.48 164.48 0 01325 400.8a15.94 15.94 0 00-8.82 12.14l-6.73 47.89a11.08 11.08 0 01-10.68 9.17h-85.54a11.11 11.11 0 01-10.69-8.87l-6.72-47.82a16.07 16.07 0 00-9-12.22 155.3 155.3 0 01-21.46-12.57 16 16 0 00-15.11-1.71l-44.89 18.07a10.81 10.81 0 01-13.14-4.58l-42.77-74a10.8 10.8 0 012.45-13.75l38.21-30a16.05 16.05 0 006-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 00-6.07-13.94l-38.19-30A10.81 10.81 0 0149.48 186l42.77-74a10.81 10.81 0 0113.14-4.59l44.9 18.08a16.11 16.11 0 0015.17-1.75A164.48 164.48 0 01187 111.2a15.94 15.94 0 008.82-12.14l6.73-47.89A11.08 11.08 0 01213.23 42h85.54a11.11 11.11 0 0110.69 8.87l6.72 47.82a16.07 16.07 0 009 12.22 155.3 155.3 0 0121.46 12.57 16 16 0 0015.11 1.71l44.89-18.07a10.81 10.81 0 0113.14 4.58l42.77 74a10.8 10.8 0 01-2.45 13.75l-38.21 30a16.05 16.05 0 00-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})),e.createElement("h3",{className:"ml-1 h3"},"Settings")),e.createElement(F.Body,null,e.createElement(ka,{tabs:a})))}function Ta(){const t=L(),[a,n]=s.exports.useState(!1),{advancedSearch:r}=R(c=>c.userSettings),l=()=>{t(Lt(!r))},o=()=>{n(!0)};return e.createElement(e.Fragment,null,e.createElement("header",{className:"flex flex-spaced"},e.createElement("div",{className:"h1"},e.createElement("svg",{className:"pos-adjusted-up wh-40p",enableBackground:"new 0 0 256 256",version:"1.1",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},e.createElement("path",{d:"m142.7 103.9c1.4 12.6 2.6 29.3 21.5 18.5 0.5-0.2 0.9-0.5 1.2-0.7 4.5-6.7-0.2-20.9 5.1-20 5.9 1-1.2 7.6 1.8 12.7 3.1-2.1 3.6-11 7.9-8.3 4.2 2.6-3.4 5.6-3.7 8.9 2.7 1.4 10.4-6 11.4-0.7 0.9 4-9.3 3.4-10.3 5.4 2.1 3.3 12.7 0.7 10.1 6-2.2 4.4-9.4-3.3-13.6-2 1.2 3.7 8.9 4.4 5.7 8-2.9 3.3-6.8-2.5-11.7-7.1-0.6 0.7-1.2 1.4-1.9 2.1-11.9 11.9-26 8.9-33.2-3.5-3.5-6-3.3-9.7-4.3-16.2-1.3 4-2.2 7.8-2.6 11.6-10.5 9.2-19.8 19.1-22.8 34.2 7-5.5 13.6-13.1 20.4-9.8 6.4 3.1 11.4 12.6 13.6 20.2 6.1-2.8 11.2-5.8 12.8-1.6 1.9 5.3-6.8 2.8-9.6 6.4 4 3.1 15.1-2.4 15.7 3.3 0.7 6.9-9.9-0.4-13.6 2.4 0.3 2.6 11.6 6.1 9.1 10.1-3.4 5.3-8.9-5.9-12.3-5.6-1.1 3.8 5.9 10.1 0.3 11.3-5.9 1.2-2.7-8.7-5.2-12.3-5.4 4.2-0.3 14.4-7.2 13.1-6-1.2 4-13.8 2.9-23-2.8-3.3-5.9-6.5-8.9-5.4-6.3 2.5-6.7 9.3-17.9 13.6 8.8 17 33.4 33.9 57.1 32.4 21.4-1.4 46-18.3 36.6-55.5-1.2-4.7-1-6.5 2.1-0.7 14.2 26.8-4.8 72.1-54.3 66.8-58.6-6.2-63.2-56.8-81.2-61.2-4-1-8.1 3.1-11.7 6.2 0.4 8.3 5.1 17.8-0.4 18.4-5.2 0.6-1-6.8-3.7-10.1-3.7 2.9-1.1 14.3-6.5 13.5-6.4-0.9 2.6-8.9 0.8-12.8-2.5-0.3-8.1 9.2-11.2 6-4.2-4.3 7.3-6.7 7.7-9.9-3.2-1.8-10.6 3.2-10.4-2.2 0.2-5.5 8.5-0.5 12.4-2-2.7-5.9-13.1-3.5-10.4-9.5 1.8-3.9 7.4 1.8 13.8 5.3 2-8.1 11.3-21.4 18-21.9 5.4-0.4 9.9 4.1 14.4 8.9-0.2-2.6-0.2-5.2-0.1-7.9 0.5-24.5 9.5-46.2 44.9-61.1 1.4-10.4-9.9-13.4-8-20.8 1.6-5.7 9.5-10.9 16.3-12.7-2.9-5.5-6.5-10.2-2.8-11.9 4.4-2 2.8 5.7 6.1 7.8 2.4-3.6-3-12.7 1.9-13.6 5.8-1 0.2 8.4 2.9 11.4 2.2-0.4 4.4-10.3 8-8.4 4.8 2.6-4.5 7.9-3.9 10.8 3.3 0.7 8.2-5.7 9.6-1 1.4 4.9-7.3 2.8-10.2 5.2 3.9 4.4 12.3-0.5 11.6 5.4-0.6 4.9-10.8-1.8-18.5-1.2-3.3 2.5-7.2 6.1-7 9.4 0.3 5 6.7 9 10.6 13.4 7.4-3.2 6.6-10.9 12-13.8 20-11 51.4 6.3 51.6 14.9 0.1 8.2-17.3 19.7-32.1 23.2-3.5 0.8-6.1-0.5-8.4-1.8-8.8-5.3-11.7 3.1-18.3 9.4",fill:"#000"})),"codebeamer cards"),e.createElement("div",{className:"actions flex flex-"},e.createElement("button",{className:`mx-1 button-icon-secondary button-icon-small button-icon
						${r?" icon-parameters":""}`,onClick:l,title:r?"Query assistant":"CBQL-String Input","data-test":"search-method"},r?"":e.createElement("i",{"data-test":"cbql-icon"},e.createElement("svg",{width:"24",height:"24",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("text",{fill:"#000000"},e.createElement("tspan",{x:"4",y:"13",textLength:"20"},"CB"),e.createElement("tspan",{x:"4",y:"25"},"QL"))))),e.createElement("button",{className:"button button-secondary button-small mx-1",onClick:o},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ionIcon pos-adjusted-up",viewBox:"0 0 512 512"},e.createElement("title",null,"Settings"),e.createElement("path",{d:"M262.29 192.31a64 64 0 1057.4 57.4 64.13 64.13 0 00-57.4-57.4zM416.39 256a154.34 154.34 0 01-1.53 20.79l45.21 35.46a10.81 10.81 0 012.45 13.75l-42.77 74a10.81 10.81 0 01-13.14 4.59l-44.9-18.08a16.11 16.11 0 00-15.17 1.75A164.48 164.48 0 01325 400.8a15.94 15.94 0 00-8.82 12.14l-6.73 47.89a11.08 11.08 0 01-10.68 9.17h-85.54a11.11 11.11 0 01-10.69-8.87l-6.72-47.82a16.07 16.07 0 00-9-12.22 155.3 155.3 0 01-21.46-12.57 16 16 0 00-15.11-1.71l-44.89 18.07a10.81 10.81 0 01-13.14-4.58l-42.77-74a10.8 10.8 0 012.45-13.75l38.21-30a16.05 16.05 0 006-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 00-6.07-13.94l-38.19-30A10.81 10.81 0 0149.48 186l42.77-74a10.81 10.81 0 0113.14-4.59l44.9 18.08a16.11 16.11 0 0015.17-1.75A164.48 164.48 0 01187 111.2a15.94 15.94 0 008.82-12.14l6.73-47.89A11.08 11.08 0 01213.23 42h85.54a11.11 11.11 0 0110.69 8.87l6.72 47.82a16.07 16.07 0 009 12.22 155.3 155.3 0 0121.46 12.57 16 16 0 0015.11 1.71l44.89-18.07a10.81 10.81 0 0113.14 4.58l42.77 74a10.8 10.8 0 01-2.45 13.75l-38.21 30a16.05 16.05 0 00-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}))),e.createElement("button",{className:"button-icon-secondary button-icon-small button-icon mx-1",onClick:()=>t(Ge(!0)),title:"Latest update informations (version 1.1)"},e.createElement("span",{className:"icon icon-bell clickable"})))),a&&e.createElement(Aa,{onClose:()=>n(!1)}))}function Ra(t){return e.createElement("span",{className:"tag fade-in","data-test":`criteria-${t.filterCriteria.id}`},`${t.showId?t.filterCriteria.id+1+". ":""}${t.filterCriteria.slug}: ${t.filterCriteria.value}`,e.createElement("div",{className:"filter-remove","data-test":`remove-${t.filterCriteria.id}`,onClick:()=>t.onRemove(t.filterCriteria.id)},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ionicon",viewBox:"0 0 512 512"},e.createElement("title",null,"Remove Filter"),e.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"}))))}function Ma(){const t=L(),{activeFilters:a,andOrFilterEnabled:n,andOrFilter:r}=R(c=>c.userSettings),l=c=>{t(Bt(c))},o=()=>{t(je(!1)),t($t())};return e.createElement("div",{className:"grid activeFiltersWrapper"},e.createElement("div",{className:`activeFilters cs1 ${a.length>=2?n?"ce8":"ce9":"ce12"}`},a.map((c,d)=>e.createElement(Ra,{key:`${c.slug}-${c.value}-${c.id}`,showId:n,filterCriteria:c,onRemove:l}))),a.length>=2&&e.createElement("div",{className:`${n?"cs9":"cs10"} ce12`},!n&&e.createElement("span",{className:"link-label fade-in-quick",title:"Add AND/OR logic",onClick:()=>{t(je(!0)),t(Fe(r))},"data-test":"showAndOr"},e.createElement("span",{className:"link-label-icon"},"+")," ",e.createElement("span",{className:"link-label-text"},"AND/OR")),n&&e.createElement("div",{className:"fade-in-quick"},e.createElement(me,{initialValues:{andOrLogic:r!=null?r:""},enableReinitialize:!0,onSubmit:c=>{t(Fe(c.andOrLogic))},validateOnChange:!0},({errors:c,handleSubmit:d})=>e.createElement("form",{onSubmit:d},e.createElement("div",{className:"grid"},e.createElement("div",{className:"cs1 ce10"},e.createElement(U,{name:"andOrLogic",placeholder:"e.g. (1 OR 2)",className:`input input-small ${c.andOrLogic?"error":"success"}`,"data-test":"andOrInput"})),e.createElement("div",{className:"cs11 ce12"},e.createElement("div",{className:"filter-remove v-align-middle bg-light-indigo",onClick:()=>o(),"data-test":"hideAndOr"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ionicon v-align-sub",viewBox:"0 0 512 512"},e.createElement("title",null,"Cancel"),e.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"}))))))))))}function La(){const t=L(),{cbqlString:a}=R(n=>n.userSettings);return e.createElement("div",{className:"fade-in-quick"},e.createElement(me,{initialValues:{cbql:a},enableReinitialize:!0,validate:n=>{},onSubmit:async n=>{t(jt(n.cbql))}},({values:n,errors:r,touched:l,handleSubmit:o,isSubmitting:c})=>e.createElement("form",{onSubmit:o},e.createElement("div",{className:"form-group"},e.createElement("label",null,"CBQL Input"),e.createElement("div",{className:"input-group"},e.createElement(U,{type:"text",name:"cbql",className:"input","data-test":"cbql"}),e.createElement("span",{className:"input-decoration input-action clickable"},e.createElement("button",{type:"submit",className:"button-icon button-icon-small icon-invitation borderless",title:"Query","data-test":"submit"})))))))}function Ba(){const t=L(),a=Object.values(Ft),{trackerId:n}=R(c=>c.userSettings),{data:r,error:l,isLoading:o}=Ot(n);return e.createElement("div",null,e.createElement(me,{initialValues:{category:"Team",value:""},validate:c=>{},onSubmit:(c,{setFieldValue:d})=>{var E,f;const h={slug:(f=(E=r==null?void 0:r.find(m=>m.trackerItemField==c.category||m.legacyRestName==c.category))==null?void 0:E.name)!=null?f:c.category,fieldName:c.category,value:c.value};t(Pt(h)),d("value","")}},({values:c,errors:d,touched:h,handleSubmit:E})=>e.createElement("form",{onSubmit:E},e.createElement("label",{className:"form-group-label"},"Filter"),e.createElement("div",{className:"input-group"},e.createElement(U,{as:"select",name:"category",className:"select two-fourth","data-test":"category-select"},a.map((f,m)=>e.createElement("option",{key:m,value:f},f)),e.createElement("option",{value:"-",disabled:!0},"----- Tracker-Fields -----"),r&&r.map((f,m)=>{var u;return e.createElement("option",{key:m,value:(u=f.trackerItemField)!=null?u:f.legacyRestName},f.name)})),e.createElement(U,{type:"text",name:"value",className:"input three-fourth","data-test":"value-input"}),e.createElement("span",{className:`input-decoration input-action clickable ${!c.value&&"input-action-disabled"}`},e.createElement("button",{type:"submit",className:"button-icon button-icon-small icon-filters borderless",title:"Add Filter",disabled:!c.value,"data-test":"submit"}))))))}function $a(){const t=L(),{projectId:a}=R(d=>d.boardSettings),{trackerId:n}=R(d=>d.userSettings),{data:r,error:l,isLoading:o}=Dt(a),c=d=>{t(ye(d.target.value))};return e.useEffect(()=>{o||(document.getElementById("trackerSelect").value=n)},[o]),e.createElement("div",{className:"form-group"},e.createElement("label",{className:"text-center"},"Tracker"),e.createElement("select",{className:"select",onChange:c,"data-test":"trackerSelect",id:"trackerSelect"},e.createElement("option",{value:"0"},"--"),!o&&(r==null?void 0:r.map(d=>e.createElement("option",{value:d.id,key:d.id},d.name)))))}function ja(){const{advancedSearch:t}=R(a=>a.userSettings);return t?e.createElement(La,null):e.createElement("div",{className:"grid fade-in-quick"},e.createElement("div",{className:"cs1 ce3"},e.createElement($a,null)),e.createElement("div",{className:"cs4 ce7 text-center"},e.createElement(Ba,null)),e.createElement("div",{className:"cs8 ce12 text-center active-filters-container"},e.createElement(Ma,null)))}class ve{constructor(a,n,r=!1){this.id=a,this.name=n,this.selected=r}}function Fa(t){return e.createElement("div",{className:"w-100 flex-row"},e.createElement("button",{className:"button button-primary button-small flex flex-centered",onClick:()=>t.onImportSelected(),disabled:t.selectedCount==0,"data-test":"importSelected"},e.createElement("span",{className:"mr-5p"},e.createElement("svg",{width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M11 12.172L8.707 9.879a1 1 0 00-1.414 1.414L12 16l4.707-4.707a1 1 0 00-1.414-1.414L13 12.172V2.586a1 1 0 10-2 0v9.586zM3 19a1 1 0 100 2h18a1 1 0 100-2H3z",fill:"#fff"}))),"Import Selected (",t.selectedCount,")"),e.createElement("button",{className:"button button-primary button-small flex flex-centered",onClick:()=>t.onImportAll(),"data-test":"importAll"},e.createElement("span",{className:"mr-5p"},e.createElement("svg",{width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M11 12.172L8.707 9.879a1 1 0 00-1.414 1.414L12 16l4.707-4.707a1 1 0 00-1.414-1.414L13 12.172V2.586a1 1 0 10-2 0v9.586zM3 19a1 1 0 100 2h18a1 1 0 100-2H3z",fill:"#fff"}))),"Import all (",t.totalCount,")"),e.createElement("button",{className:"button button-secondary button-small flex flex-centered",disabled:t.importedItems.length==0,"data-test":"sync",onClick:()=>t.onSync()},e.createElement("span",{className:"icon icon-refresh mr-1 pos-adjusted-down"}),"Sync (",t.importedItems.length,")"))}function Oa(t,a){let n=0;return s.exports.Children.map(t,r=>s.exports.isValidElement(r)?a(r,n++):r)}const He=1e3,Pa={min:0,max:100,animated:!1,isChild:!1,visuallyHidden:!1,striped:!1};function Da(t,a,n){const r=(t-a)/(n-a)*100;return Math.round(r*He)/He}function qe({min:t,now:a,max:n,label:r,visuallyHidden:l,striped:o,animated:c,className:d,style:h,variant:E,bsPrefix:f,...m},u){return S.exports.jsx("div",{ref:u,...m,role:"progressbar",className:O(d,`${f}-bar`,{[`bg-${E}`]:E,[`${f}-bar-animated`]:c,[`${f}-bar-striped`]:c||o}),style:{width:`${Da(a,t,n)}%`,...h},"aria-valuenow":a,"aria-valuemin":t,"aria-valuemax":n,children:l?S.exports.jsx("span",{className:"visually-hidden",children:r}):r})}const Te=s.exports.forwardRef(({isChild:t,...a},n)=>{if(a.bsPrefix=ie(a.bsPrefix,"progress"),t)return qe(a,n);const{min:r,now:l,max:o,label:c,visuallyHidden:d,striped:h,animated:E,bsPrefix:f,variant:m,className:u,children:p,...b}=a;return S.exports.jsx("div",{ref:n,...b,className:O(u,f),children:p?Oa(p,y=>s.exports.cloneElement(y,{isChild:!0})):qe({min:r,now:l,max:o,label:c,visuallyHidden:d,striped:h,animated:E,bsPrefix:f,variant:m},n)})});Te.displayName="ProgressBar";Te.defaultProps=Pa;const rt=Te,ot=s.exports.forwardRef(({bsPrefix:t,variant:a,animation:n,size:r,as:l="div",className:o,...c},d)=>{t=ie(t,"spinner");const h=`${t}-${n}`;return S.exports.jsx(l,{ref:d,...c,className:O(o,h,r&&`${h}-${r}`,a&&`text-${a}`)})});ot.displayName="Spinner";const lt=ot;function _a(t){var p,b;const a=L(),{trackerId:n,cbqlString:r}=R(y=>y.userSettings),[l,o]=s.exports.useState(0),{data:c,error:d,isLoading:h}=ke({page:ue,pageSize:Ae,queryString:`${r}${t.items.length?" AND item.id IN ("+t.items.join(",")+")":""}`}),{key:E,color:f,error:m,isLoading:u}=Ke(n,{selectFromResult:({data:y,error:C,isLoading:i})=>({key:y==null?void 0:y.keyName,color:y==null?void 0:y.color,error:C,isLoading:i})});return e.useEffect(()=>{d||m?t.onClose:c&&E&&(async C=>{var w;const i=structuredClone(C);for(let x=0;x<i.length;x++){if((w=i[x].categories)!=null&&w.length&&i[x].categories.find(v=>v.name=="Folder"||v.name=="Information")){a(ne({header:"Skipping folder / information item",content:`<p>${i[x].name} is a Folder / Information and will not be imported.</p>`,bg:"info",delay:1500}));continue}i[x].tracker.keyName=E,i[x].tracker.color=f,await _t(i[x]),o(x+1)}await miro.board.ui.closeModal()})(c.items).catch(C=>console.error(C))},[c,E]),e.createElement(F,{show:!0,centered:!0},e.createElement(F.Header,{closeButton:t.onClose!==void 0,onHide:()=>{t.onClose&&t.onClose()}}),e.createElement(F.Body,null,e.createElement("div",{className:"centered w-80"},e.createElement("h5",{className:"h5 text-center"},e.createElement(lt,{animation:"grow",variant:"primary"}),e.createElement("br",null),h&&e.createElement("span",null,"Fetching data"),!h&&e.createElement("span",null,"Creating cards")),e.createElement(rt,{className:"w-100",variant:"primary",now:l,max:(p=t.totalItems)!=null?p:t.items.length,label:`${l}/${(b=t.totalItems)!=null?b:t.items.length}`,"data-test":"importProgress"}))))}function Ha(t){const a=s.exports.useRef(null);return e.useEffect(()=>{var n;a.current&&(a.current.checked=(n=t.checked)!=null?n:!1)},[]),e.createElement("tr",null,e.createElement("td",null,e.createElement("input",{type:"checkbox",className:"checkBox",onChange:n=>t.onSelect(t.item,n.target.checked),disabled:t.disabled,"data-test":"itemCheck-"+t.item.id,ref:a})),e.createElement("td",{"data-test":"itemId"},t.item.id),e.createElement("td",{"data-test":"itemName"},t.item.name))}function qa(t){const a=L(),{trackerId:n}=R(u=>u.userSettings),[r,l]=s.exports.useState(0),{data:o,error:c,isLoading:d}=ke({page:ue,pageSize:Ae,queryString:`item.id IN (${t.items.map(u=>u.itemId).join(",")})`}),{key:h,color:E,error:f,isLoading:m}=Ke(n,{selectFromResult:({data:u,error:p,isLoading:b})=>({key:u==null?void 0:u.keyName,color:u==null?void 0:u.color,error:p,isLoading:b})});return e.useEffect(()=>{c||f||o&&h&&(async p=>{var y,C;const b=structuredClone(p);for(let i=0;i<b.length;i++){if((y=b[i].categories)!=null&&y.length&&b[i].categories.find(x=>x.name=="Folder"||x.name=="Information")){a(ne({header:"Skipping folder / information item",content:`<p>${b[i].name} is a Folder / Information and will not be imported.</p>`,bg:"info",delay:1500}));continue}b[i].tracker.keyName=h,b[i].tracker.color=E;const w=(C=t.items.find(x=>x.itemId==b[i].id.toString()))==null?void 0:C.appCardId;if(!w){a(ne({header:"Failed updating an item",content:`<p>
									Failed updating card for Item 
									${b[i].name}
								</p>`,bg:"warning",delay:2500}));continue}await Ve(b[i],w),l(i+1)}await miro.board.ui.closeModal()})(o.items).catch(p=>console.error(p))},[o,h]),e.createElement(F,{show:!0,centered:!0},e.createElement(F.Header,{closeButton:t.onClose!==void 0,onHide:()=>{t.onClose&&t.onClose()}}),e.createElement(F.Body,null,e.createElement("div",{className:"centered w-80"},e.createElement("h5",{className:"h5 text-center"},e.createElement(lt,{animation:"grow",variant:"primary"}),e.createElement("br",null),d&&e.createElement("span",null,"Fetching data"),!d&&e.createElement("span",null,"Syncing cards")),e.createElement(rt,{className:"w-100",variant:"primary",now:r,max:t.items.length,label:`${r}/${t.items.length}`,"data-test":"importProgress"}))))}function Wa(){var H;L();const[t,a]=s.exports.useState(ue),[n,r]=s.exports.useState([]),[l,o]=s.exports.useState([]),[c,d]=s.exports.useState(!1),[h,E]=s.exports.useState(!1),[f,m]=s.exports.useState(!1),[u,p]=s.exports.useState([]),b={root:document.getElementById("queryResultsContainer"),rootMargin:"0px",threshold:1},y=(g,T)=>{!g[0]||!g[0].isIntersecting||(T.unobserve(g[0].target),$())},C=new IntersectionObserver(y,b),{cbqlString:i,trackerId:w,advancedSearch:x}=R(g=>g.userSettings),{data:v,error:M,isLoading:A}=ke({page:t,pageSize:Sa,queryString:i}),$=()=>{v&&(d(n.length>=v.total),n.length<v.total&&a(t+1))},B=(g,T)=>{r(n.map(I=>I.id!=g.id?I:new ve(g.id,g.name,T)))};e.useEffect(()=>{miro.board.get({type:"app_card"}).then(g=>{p(g.map(T=>{let I=T;const P=I.title.match(We);if(!(P!=null&&P.length))return console.error("Couldn't extract ID from Card title. Can't sync!"),{appCardId:I.id,itemId:""};const se=P[1];return{appCardId:I.id,itemId:se}}))})},[]),e.useEffect(()=>{r([]),a(1)},[i]),e.useEffect(()=>{C.disconnect()},[w]);//! this should (must, or else it doesn't really work) only trigger when we load another page of query results
e.useEffect(()=>{v&&v.items.length&&(v.page>1?r([...n,...v.items.map(g=>new ve(g.id,g.name))]):r(v.items.map(g=>new ve(g.id,g.name))))},[v]),e.useEffect(()=>{const g=document.querySelector("#queryResults tbody tr:last-child");g&&C.observe(g)},[n]);const Q=()=>{o(n.filter(g=>g.selected).map(g=>g.id.toString())),E(!0)},V=()=>{o([]),E(!0)},G=()=>{m(!0)};return!n.length&&A?e.createElement("div",{className:"centered h-auto"},e.createElement("div",{className:"loading-spinner"})):v&&v.total==0?e.createElement("div",{className:"centered h-auto"},e.createElement("h3",{className:"h3 muted-info","data-test":"noItemsInTracker"},"No Items in this Query")):M?e.createElement("div",{className:"centered h-auto"},e.createElement("h3",{className:"h3 error"},"Invalid query")):w?e.createElement("div",null,e.createElement("table",{className:"table",id:"queryResults","data-test":"resultsTable"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("td",null,"Imported"),e.createElement("td",null,"ID"),e.createElement("td",null,"Name"))),e.createElement("tbody",{"data-test":"tableBody"},n.map(g=>e.createElement(Ha,{item:g,key:g.id,checked:u.find(T=>T.itemId==g.id)!==void 0,disabled:u.find(T=>T.itemId==g.id)!==void 0,onSelect:B}))),e.createElement("tfoot",null,e.createElement("tr",{className:"text-center"},!c&&e.createElement("td",{colSpan:3,className:"position-relative loading-spinner loading-spinner-table-end"}),c&&e.createElement("td",{colSpan:3,className:"muted","data-test":"eosInfo"},"End of stream")))),e.createElement(Fa,{selectedCount:n.filter(g=>g.selected).length,totalCount:(H=v==null?void 0:v.total)!=null?H:0,onImportSelected:Q,onImportAll:V,onSync:G,importedItems:u}),h&&e.createElement(_a,{items:l,totalItems:l.length>0?l.length:v==null?void 0:v.total}),f&&e.createElement(qa,{items:u})):e.createElement("div",{className:"centered"},e.createElement("h3",{className:"h3 muted-color"},"Select a Tracker to load its Items"))}function za(){return s.exports.createElement("div",{className:"fade-in","data-test":"import"},s.exports.createElement(Ta,null),s.exports.createElement(ja,null),s.exports.createElement(Wa,null))}function Ua(){const t=L(),[a,n]=s.exports.useState(!1),r=()=>{n(!0),setTimeout(()=>{t(Ge(!1))},200)};return e.createElement("div",{className:`container centered-horizontally announcements ${a?"shrink":"grow"}`,"data-test":"announcements"},e.createElement("span",{className:"close-button mb-3 clickable"},e.createElement("div",{onClick:()=>r(),className:"icon icon-close clickable","data-test":"close-announcements"})),e.createElement("div",{className:"mb-5"},e.createElement("h2",{className:"h2 text-center"},e.createElement("svg",{className:"pos-adjusted-up wh-40p",enableBackground:"new 0 0 256 256",version:"1.1",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},e.createElement("path",{d:"m142.7 103.9c1.4 12.6 2.6 29.3 21.5 18.5 0.5-0.2 0.9-0.5 1.2-0.7 4.5-6.7-0.2-20.9 5.1-20 5.9 1-1.2 7.6 1.8 12.7 3.1-2.1 3.6-11 7.9-8.3 4.2 2.6-3.4 5.6-3.7 8.9 2.7 1.4 10.4-6 11.4-0.7 0.9 4-9.3 3.4-10.3 5.4 2.1 3.3 12.7 0.7 10.1 6-2.2 4.4-9.4-3.3-13.6-2 1.2 3.7 8.9 4.4 5.7 8-2.9 3.3-6.8-2.5-11.7-7.1-0.6 0.7-1.2 1.4-1.9 2.1-11.9 11.9-26 8.9-33.2-3.5-3.5-6-3.3-9.7-4.3-16.2-1.3 4-2.2 7.8-2.6 11.6-10.5 9.2-19.8 19.1-22.8 34.2 7-5.5 13.6-13.1 20.4-9.8 6.4 3.1 11.4 12.6 13.6 20.2 6.1-2.8 11.2-5.8 12.8-1.6 1.9 5.3-6.8 2.8-9.6 6.4 4 3.1 15.1-2.4 15.7 3.3 0.7 6.9-9.9-0.4-13.6 2.4 0.3 2.6 11.6 6.1 9.1 10.1-3.4 5.3-8.9-5.9-12.3-5.6-1.1 3.8 5.9 10.1 0.3 11.3-5.9 1.2-2.7-8.7-5.2-12.3-5.4 4.2-0.3 14.4-7.2 13.1-6-1.2 4-13.8 2.9-23-2.8-3.3-5.9-6.5-8.9-5.4-6.3 2.5-6.7 9.3-17.9 13.6 8.8 17 33.4 33.9 57.1 32.4 21.4-1.4 46-18.3 36.6-55.5-1.2-4.7-1-6.5 2.1-0.7 14.2 26.8-4.8 72.1-54.3 66.8-58.6-6.2-63.2-56.8-81.2-61.2-4-1-8.1 3.1-11.7 6.2 0.4 8.3 5.1 17.8-0.4 18.4-5.2 0.6-1-6.8-3.7-10.1-3.7 2.9-1.1 14.3-6.5 13.5-6.4-0.9 2.6-8.9 0.8-12.8-2.5-0.3-8.1 9.2-11.2 6-4.2-4.3 7.3-6.7 7.7-9.9-3.2-1.8-10.6 3.2-10.4-2.2 0.2-5.5 8.5-0.5 12.4-2-2.7-5.9-13.1-3.5-10.4-9.5 1.8-3.9 7.4 1.8 13.8 5.3 2-8.1 11.3-21.4 18-21.9 5.4-0.4 9.9 4.1 14.4 8.9-0.2-2.6-0.2-5.2-0.1-7.9 0.5-24.5 9.5-46.2 44.9-61.1 1.4-10.4-9.9-13.4-8-20.8 1.6-5.7 9.5-10.9 16.3-12.7-2.9-5.5-6.5-10.2-2.8-11.9 4.4-2 2.8 5.7 6.1 7.8 2.4-3.6-3-12.7 1.9-13.6 5.8-1 0.2 8.4 2.9 11.4 2.2-0.4 4.4-10.3 8-8.4 4.8 2.6-4.5 7.9-3.9 10.8 3.3 0.7 8.2-5.7 9.6-1 1.4 4.9-7.3 2.8-10.2 5.2 3.9 4.4 12.3-0.5 11.6 5.4-0.6 4.9-10.8-1.8-18.5-1.2-3.3 2.5-7.2 6.1-7 9.4 0.3 5 6.7 9 10.6 13.4 7.4-3.2 6.6-10.9 12-13.8 20-11 51.4 6.3 51.6 14.9 0.1 8.2-17.3 19.7-32.1 23.2-3.5 0.8-6.1-0.5-8.4-1.8-8.8-5.3-11.7 3.1-18.3 9.4",fill:"#000"})),e.createElement("span",{className:"roche-primary"},"codebeamer-cards Version 1.1 Release")),e.createElement("p",{className:"text-center"},e.createElement("b",null,"Welcome to Version 1.1 of"," ",e.createElement("span",{className:"roche-primary"},"codebeamer-cards")," ","!")),e.createElement("p",{className:"mt-5"},"This release adds the ability for you to"," ",e.createElement("b",null,"edit certain attributes")," of your imported Items"," ",e.createElement("b",null,"right inside Miro"),".",e.createElement("br",null),"We've also fixed a few bugs along the way!"),e.createElement("p",{className:"text-center roche-primary mt-3"},"See below to find out how it works!")),e.createElement("div",null,e.createElement("div",{className:"text-center"},e.createElement("h5",{className:"h5 text-underline"},"Edit an Item"),e.createElement("img",{src:"/src/assets/images/announcements/v1-1-0_edit.gif",alt:"Editing an item in-miro"}),e.createElement("p",{className:"mt-3"},`Open an Item's details-view by clicking the icon on its top right corner. (You may have to first click away the "connect" icon in the same place, which doesn't do anything on its own!)`),e.createElement("p",null,"Then, change any of the following attributes, if your Item / Tracker supports them:",e.createElement("br",null),"Assignee | Team | Version | Subject | Story Points"),e.createElement("p",{className:"mt-3"},e.createElement("em",null,"The updates you make will reflect on the Item's card and on codebeamer once you save.")))),e.createElement("div",null,e.createElement("div",{className:"text-center mt-5"},e.createElement("h5",{className:"h5 text-underline"},"Zoom to the edited Item"),e.createElement("img",{src:"/src/assets/images/announcements/v1-1-0_zoomToCard.gif",alt:"Zoom to card"}),e.createElement("p",{className:"mt-3"},'In case you get lost among your imported cards while editing one - use the "zoom to card" button ("eye"-icon) in the panel header to get taken to it.'))),e.createElement("div",{className:"announcement-actions mt-5 text-center"},e.createElement("h6",{className:"h6"},"Additional resources"),e.createElement("a",{href:"https://github.com/codeBeamer-Extensions-and-Addons/codebeamer-miro/blob/master/CHANGELOG.md",target:"_blank",className:"roche-primary-light"},"Detailed Changelog")," ","|"," ",e.createElement("a",{href:"https://github.com/codeBeamer-Extensions-and-Addons/codebeamer-miro/blob/master/README.md",target:"_blank",className:"roche-primary-light"},"Github Documentation")," ","|"," ",e.createElement("a",{href:"https://retina.roche.com/cb/wiki/1420850",target:"_blank",className:"roche-primary-light"},"Retina Documentation")),e.createElement("div",{className:"skip-button mt-3"},e.createElement("a",{className:"roche-primary-light text-decoration-none clickable",onClick:()=>r(),"data-test":"skip-announcements"},"To the app ->")))}function Qa(){const t=L();s.exports.useEffect(()=>{t(Ht())},[]);const{cbUsername:a,cbPassword:n,showAnnouncements:r}=R(f=>f.userSettings),{cbAddress:l,projectId:o,loading:c}=R(f=>f.boardSettings),{data:d,error:h,isLoading:E}=qt({cbAddress:l,cbUsername:a,cbPassword:n});return r?s.exports.createElement(Ua,null):E||h?s.exports.createElement("div",{className:"centered"},s.exports.createElement(Xe,{loading:E,error:l&&a&&n?h:void 0})):o?s.exports.createElement(za,null):s.exports.createElement("div",{className:"centered fade-in"},s.exports.createElement(Ye,null))}function Va(){return s.exports.useEffect(()=>{}),s.exports.createElement(zt,{store:Ut},s.exports.createElement(Qa,null),s.exports.createElement(Qt,null))}const Ga=document.getElementById("root"),Ka=Wt(Ga);Ka.render(s.exports.createElement(Va,null));
