import{C as He}from"./regular-expressions.11563385.js";import{u as D,r as s,a as R,b as gt,S as Et,d as bt,s as vt,c as We,e as re,o as ve,f as ne,g as xt,h as _,l as Me,i as qe,j as k,R as yt,k as xe,m as se,n as F,C as Nt,p as wt,q as kt,t as Le,F as ze,v as St,w as Ct,x as e,y as It,z as Tt,A as At,B as Rt,D as Ve,E as Ge,G as Qe,H as Mt,I as Be,J as je,K as ye,L as le,M as Lt,N as Bt,O as jt,P as Ot,Q as $t,T as Ft,U as Dt,V as Ne,W as Ue,X as Pt,Y as _t,Z as Ht,_ as Wt,$ as qt,a0 as zt,a1 as Vt}from"./BoardSettingsLoader.e37bbf06.js";function Ke(t){const a=D(),[n,r]=s.exports.useState(!1),[o,l]=s.exports.useState(),{cbAddress:c,projectId:i}=R(p=>p.boardSettings),[x,E]=s.exports.useState(i.toString()),[h,m]=gt(i);s.exports.useEffect(()=>{h()},[c]),s.exports.useEffect(()=>{var p,S;m.data&&E((S=(p=m.data.find(g=>g.id==i))==null?void 0:p.name)!=null?S:i.toString())},[m.data]);const y=()=>{r(!0),setTimeout(()=>{r(!1)},2e3)};return s.exports.createElement("div",{"data-test":"project-selection",className:"container project-selection"},!t.headerLess&&s.exports.createElement("header",{className:"text-center mb-5"},s.exports.createElement("h3",{className:"h3"},"Project selection"),s.exports.createElement("p",null,"Select your Project")),s.exports.createElement("div",{className:"mt-3"},s.exports.createElement(Et,{className:"basic-single",classNamePrefix:"select",options:m.data,isLoading:m.isLoading,isSearchable:!0,isClearable:!0,value:{id:o,name:x},getOptionLabel:p=>p.name,getOptionValue:p=>{var S,g;return(g=(S=p.id)==null?void 0:S.toString())!=null?g:"-1"},onChange:p=>{p&&(l(p.id),E(p.name))},maxMenuHeight:180}),s.exports.createElement("span",{className:"muted-medium","data-test":"cb-context"},"Projects from: ",c),s.exports.createElement("div",{className:"flex-centered mt-4"},!n&&s.exports.createElement("button",{type:"submit",disabled:!o,className:"fade-in button button-primary","data-test":"submit",onClick:()=>{if(!o){a(bt({header:"No value provided for the Project",content:"This is probably due to an internal error. Please contact support!",bg:"danger"}));return}a(vt(o)),a(We("")),y()}},"Confirm"),n&&s.exports.createElement("span",{"data-test":"user-feedback"},s.exports.createElement("svg",{className:"checkmark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52"},s.exports.createElement("circle",{className:"checkmark__circle",cx:"26",cy:"26",r:"25",fill:"none"}),s.exports.createElement("path",{className:"checkmark__check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"}))))))}var oe;function Oe(t){if((!oe&&oe!==0||t)&&re){var a=document.createElement("div");a.style.position="absolute",a.style.top="-9999px",a.style.width="50px",a.style.height="50px",a.style.overflow="scroll",document.body.appendChild(a),oe=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return oe}function Gt(){return s.exports.useState(null)}function fe(t){t===void 0&&(t=ve());try{var a=t.activeElement;return!a||!a.nodeName?null:a}catch{return t.body}}function $e(t,a){if(t.contains)return t.contains(a);if(t.compareDocumentPosition)return t===a||!!(t.compareDocumentPosition(a)&16)}function Qt(t){var a=s.exports.useRef(null);return s.exports.useEffect(function(){a.current=t}),a.current}const Ut="data-rr-ui-";function Kt(t){return`${Ut}${t}`}function Xt(t=document){const a=t.defaultView;return Math.abs(a.innerWidth-t.documentElement.clientWidth)}const Fe=Kt("modal-open");class we{constructor({ownerDocument:a,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=a}getScrollbarWidth(){return Xt(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(a){}removeModalAttributes(a){}setContainerStyle(a){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",o=this.getElement();a.style={overflow:o.style.overflow,[r]:o.style[r]},a.scrollBarWidth&&(n[r]=`${parseInt(ne(o,r)||"0",10)+a.scrollBarWidth}px`),o.setAttribute(Fe,""),ne(o,n)}reset(){[...this.modals].forEach(a=>this.remove(a))}removeContainerStyle(a){const n=this.getElement();n.removeAttribute(Fe),Object.assign(n.style,a.style)}add(a){let n=this.modals.indexOf(a);return n!==-1||(n=this.modals.length,this.modals.push(a),this.setModalAttributes(a),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(a){const n=this.modals.indexOf(a);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(a))}isTopModal(a){return!!this.modals.length&&this.modals[this.modals.length-1]===a}}const Xe=s.exports.createContext(re?window:void 0);Xe.Provider;function Ye(){return s.exports.useContext(Xe)}const he=(t,a)=>re?t==null?(a||ve()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function Yt(t,a){const n=Ye(),[r,o]=s.exports.useState(()=>he(t,n==null?void 0:n.document));if(!r){const l=he(t);l&&o(l)}return s.exports.useEffect(()=>{a&&r&&a(r)},[a,r]),s.exports.useEffect(()=>{const l=he(t);l!==r&&o(l)},[t,r]),r}const Zt=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Jt(t,a){if(t==null)return{};var n={},r=Object.keys(t),o,l;for(l=0;l<r.length;l++)o=r[l],!(a.indexOf(o)>=0)&&(n[o]=t[o]);return n}let ge;function ea(t){return ge||(ge=new we({ownerDocument:t==null?void 0:t.document})),ge}function ta(t){const a=Ye(),n=t||ea(a),r=s.exports.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:s.exports.useCallback(o=>{r.current.dialog=o},[]),setBackdropRef:s.exports.useCallback(o=>{r.current.backdrop=o},[])})}const Ze=s.exports.forwardRef((t,a)=>{let{show:n=!1,role:r="dialog",className:o,style:l,children:c,backdrop:i=!0,keyboard:x=!0,onBackdropClick:E,onEscapeKeyDown:h,transition:m,backdropTransition:y,autoFocus:p=!0,enforceFocus:S=!0,restoreFocus:g=!0,restoreFocusOptions:v,renderDialog:d,renderBackdrop:N=w=>k.exports.jsx("div",Object.assign({},w)),manager:u,container:T,onShow:A,onHide:C=()=>{},onExit:M,onExited:B,onExiting:V,onEnter:G,onEntering:H,onEntered:f}=t,L=Jt(t,Zt);const j=Yt(T),I=ta(u),ie=xt(),de=Qt(n),[W,Q]=s.exports.useState(!n),P=s.exports.useRef(null);s.exports.useImperativeHandle(a,()=>I,[I]),re&&!de&&n&&(P.current=fe()),!m&&!n&&!W?Q(!0):n&&W&&Q(!1);const U=_(()=>{if(I.add(),te.current=Me(document,"keydown",ue),K.current=Me(document,"focus",()=>setTimeout(q),!0),A&&A(),p){const w=fe(document);I.dialog&&w&&!$e(I.dialog,w)&&(P.current=w,I.dialog.focus())}}),O=_(()=>{if(I.remove(),te.current==null||te.current(),K.current==null||K.current(),g){var w;(w=P.current)==null||w.focus==null||w.focus(v),P.current=null}});s.exports.useEffect(()=>{!n||!j||U()},[n,j,U]),s.exports.useEffect(()=>{!W||O()},[W,O]),qe(()=>{O()});const q=_(()=>{if(!S||!ie()||!I.isTopModal())return;const w=fe();I.dialog&&w&&!$e(I.dialog,w)&&I.dialog.focus()}),me=_(w=>{w.target===w.currentTarget&&(E==null||E(w),i===!0&&C())}),ue=_(w=>{x&&w.keyCode===27&&I.isTopModal()&&(h==null||h(w),w.defaultPrevented||C())}),K=s.exports.useRef(),te=s.exports.useRef(),pe=(...w)=>{Q(!0),B==null||B(...w)},X=m;if(!j||!(n||X&&!W))return null;const ae=Object.assign({role:r,ref:I.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},L,{style:l,className:o,tabIndex:-1});let z=d?d(ae):k.exports.jsx("div",Object.assign({},ae,{children:s.exports.cloneElement(c,{role:"document"})}));X&&(z=k.exports.jsx(X,{appear:!0,unmountOnExit:!0,in:!!n,onExit:M,onExiting:V,onExited:pe,onEnter:G,onEntering:H,onEntered:f,children:z}));let Y=null;if(i){const w=y;Y=N({ref:I.setBackdropRef,onClick:me}),w&&(Y=k.exports.jsx(w,{appear:!0,in:!!n,children:Y}))}return k.exports.jsx(k.exports.Fragment,{children:yt.createPortal(k.exports.jsxs(k.exports.Fragment,{children:[Y,z]}),j)})});Ze.displayName="Modal";const aa=Object.assign(Ze,{Manager:we});function na(t,a){return t.classList?!!a&&t.classList.contains(a):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+a+" ")!==-1}function ra(t,a){t.classList?t.classList.add(a):na(t,a)||(typeof t.className=="string"?t.className=t.className+" "+a:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+a))}var sa=Function.prototype.bind.call(Function.prototype.call,[].slice);function J(t,a){return sa(t.querySelectorAll(a))}function De(t,a){return t.replace(new RegExp("(^|\\s)"+a+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function oa(t,a){t.classList?t.classList.remove(a):typeof t.className=="string"?t.className=De(t.className,a):t.setAttribute("class",De(t.className&&t.className.baseVal||"",a))}const ee={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class la extends we{adjustAndStore(a,n,r){const o=n.style[a];n.dataset[a]=o,ne(n,{[a]:`${parseFloat(ne(n,a))+r}px`})}restore(a,n){const r=n.dataset[a];r!==void 0&&(delete n.dataset[a],ne(n,{[a]:r}))}setContainerStyle(a){super.setContainerStyle(a);const n=this.getElement();if(ra(n,"modal-open"),!a.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";J(n,ee.FIXED_CONTENT).forEach(l=>this.adjustAndStore(r,l,a.scrollBarWidth)),J(n,ee.STICKY_CONTENT).forEach(l=>this.adjustAndStore(o,l,-a.scrollBarWidth)),J(n,ee.NAVBAR_TOGGLER).forEach(l=>this.adjustAndStore(o,l,a.scrollBarWidth))}removeContainerStyle(a){super.removeContainerStyle(a);const n=this.getElement();oa(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";J(n,ee.FIXED_CONTENT).forEach(l=>this.restore(r,l)),J(n,ee.STICKY_CONTENT).forEach(l=>this.restore(o,l)),J(n,ee.NAVBAR_TOGGLER).forEach(l=>this.restore(o,l))}}let Ee;function ca(t){return Ee||(Ee=new la(t)),Ee}const ia=xe("modal-body"),da=s.exports.createContext({onHide(){}}),Je=da,et=s.exports.forwardRef(({bsPrefix:t,className:a,contentClassName:n,centered:r,size:o,fullscreen:l,children:c,scrollable:i,...x},E)=>{t=se(t,"modal");const h=`${t}-dialog`,m=typeof l=="string"?`${t}-fullscreen-${l}`:`${t}-fullscreen`;return k.exports.jsx("div",{...x,ref:E,className:F(h,a,o&&`${t}-${o}`,r&&`${h}-centered`,i&&`${h}-scrollable`,l&&m),children:k.exports.jsx("div",{className:F(`${t}-content`,n),children:c})})});et.displayName="ModalDialog";const tt=et,ma=xe("modal-footer"),ua={closeLabel:"Close",closeButton:!1},at=s.exports.forwardRef(({closeLabel:t,closeVariant:a,closeButton:n,onHide:r,children:o,...l},c)=>{const i=s.exports.useContext(Je),x=_(()=>{i==null||i.onHide(),r==null||r()});return k.exports.jsxs("div",{ref:c,...l,children:[o,n&&k.exports.jsx(Nt,{"aria-label":t,variant:a,onClick:x})]})});at.defaultProps=ua;const pa=at,fa={closeLabel:"Close",closeButton:!1},ke=s.exports.forwardRef(({bsPrefix:t,className:a,...n},r)=>(t=se(t,"modal-header"),k.exports.jsx(pa,{ref:r,...n,className:F(a,t)})));ke.displayName="ModalHeader";ke.defaultProps=fa;const ha=ke,ga=t=>s.exports.forwardRef((a,n)=>k.exports.jsx("div",{...a,ref:n,className:F(a.className,t)})),Ea=ga("h4"),ba=xe("modal-title",{Component:Ea}),va={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:tt};function xa(t){return k.exports.jsx(ze,{...t,timeout:null})}function ya(t){return k.exports.jsx(ze,{...t,timeout:null})}const Se=s.exports.forwardRef(({bsPrefix:t,className:a,style:n,dialogClassName:r,contentClassName:o,children:l,dialogAs:c,"aria-labelledby":i,"aria-describedby":x,"aria-label":E,show:h,animation:m,backdrop:y,keyboard:p,onEscapeKeyDown:S,onShow:g,onHide:v,container:d,autoFocus:N,enforceFocus:u,restoreFocus:T,restoreFocusOptions:A,onEntered:C,onExit:M,onExiting:B,onEnter:V,onEntering:G,onExited:H,backdropClassName:f,manager:L,...j},I)=>{const[ie,de]=s.exports.useState({}),[W,Q]=s.exports.useState(!1),P=s.exports.useRef(!1),U=s.exports.useRef(!1),O=s.exports.useRef(null),[q,me]=Gt(),ue=wt(I,me),K=_(v),te=kt();t=se(t,"modal");const pe=s.exports.useMemo(()=>({onHide:K}),[K]);function X(){return L||ca({isRTL:te})}function ae(b){if(!re)return;const Z=X().getScrollbarWidth()>0,Re=b.scrollHeight>ve(b).documentElement.clientHeight;de({paddingRight:Z&&!Re?Oe():void 0,paddingLeft:!Z&&Re?Oe():void 0})}const z=_(()=>{q&&ae(q.dialog)});qe(()=>{Le(window,"resize",z),O.current==null||O.current()});const Y=()=>{P.current=!0},w=b=>{P.current&&q&&b.target===q.dialog&&(U.current=!0),P.current=!1},Te=()=>{Q(!0),O.current=Ct(q.dialog,()=>{Q(!1)})},lt=b=>{b.target===b.currentTarget&&Te()},ct=b=>{if(y==="static"){lt(b);return}if(U.current||b.target!==b.currentTarget){U.current=!1;return}v==null||v()},it=b=>{!p&&y==="static"?(b.preventDefault(),Te()):p&&S&&S(b)},dt=(b,Z)=>{b&&ae(b),V==null||V(b,Z)},mt=b=>{O.current==null||O.current(),M==null||M(b)},ut=(b,Z)=>{G==null||G(b,Z),St(window,"resize",z)},pt=b=>{b&&(b.style.display=""),H==null||H(b),Le(window,"resize",z)},ft=s.exports.useCallback(b=>k.exports.jsx("div",{...b,className:F(`${t}-backdrop`,f,!m&&"show")}),[m,f,t]),Ae={...n,...ie};Ae.display="block";const ht=b=>k.exports.jsx("div",{role:"dialog",...b,style:Ae,className:F(a,t,W&&`${t}-static`,!m&&"show"),onClick:y?ct:void 0,onMouseUp:w,"aria-label":E,"aria-labelledby":i,"aria-describedby":x,children:k.exports.jsx(c,{...j,onMouseDown:Y,className:r,contentClassName:o,children:l})});return k.exports.jsx(Je.Provider,{value:pe,children:k.exports.jsx(aa,{show:h,ref:ue,backdrop:y,container:d,keyboard:!0,autoFocus:N,enforceFocus:u,restoreFocus:T,restoreFocusOptions:A,onEscapeKeyDown:it,onShow:g,onHide:v,onEnter:dt,onEntering:ut,onEntered:C,onExit:mt,onExiting:B,onExited:pt,manager:X(),transition:m?xa:void 0,backdropTransition:m?ya:void 0,renderBackdrop:ft,renderDialog:ht})})});Se.displayName="Modal";Se.defaultProps=va;const $=Object.assign(Se,{Body:ia,Header:ha,Title:ba,Footer:ma,Dialog:tt,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});function Na(t){var a;return e.createElement("div",{tabIndex:0,className:`tab ${t.active?"tab-active":""}`,"data-test":"wrapper"},e.createElement("div",{className:"tab-text tab-badge","data-badge":(a=t.dataBadge)!=null?a:"","data-test":"content"},t.icon&&e.createElement("span",{className:`clickable icon icon-${t.icon}`,"data-test":"icon"}," "),t.title))}function wa(t){var l;const[a,n]=s.exports.useState((l=t.initiallySelectedIndex)!=null?l:0),r=c=>{n(c)},o={width:1/t.tabs.length*100+"%"};return e.createElement(e.Fragment,null,e.createElement("div",{className:"tabs"},e.createElement("div",{className:"tabs-header-list"},t.tabs.map((c,i)=>e.createElement("div",{key:i,onClick:()=>r(i),style:o,"data-test":`tab-header-${i}`},e.createElement(Na,{title:c.title,icon:c.icon,active:a===i}))))),e.createElement("div",{className:"tab-content my-2","data-test":"tab-content"},t.tabs[a].tab))}const Ce=250,ce=1,ka=13;function Sa(){const t=D(),{cardTagConfiguration:a}=R(d=>d.boardSettings),[n,r]=s.exports.useState([]),[o,l]=s.exports.useState(!1),[c,i]=s.exports.useState(!1),[x,E]=s.exports.useState([]),[h,m,y]=It(),p=["Summary","Description","Status"],S=Object.values(Tt);e.useEffect(()=>{const d=Object.keys(a.standard);let N=[];for(let u of d)a.standard[u]==!0&&N.push(u);r(N)},[a]);const g=d=>{var N;return e.createElement("div",{className:"property",key:d},e.createElement("label",{className:"checkbox","data-test":`tag-${d.replace(" ","-")}`},e.createElement("input",{type:"checkbox",checked:(N=a.standard[d])!=null?N:!1,onChange:()=>t(Rt({property:d,value:!a.standard[d]}))}),e.createElement("span",null,d)))},v=async()=>{l(!0);const d=await miro.board.get({type:"app_card"});if(!d||!d.length){l(!1),miro.board.notifications.showInfo("No items on the board to apply to");return}const N=d.map(u=>{let T=u;const A=T.title.match(He);if(!(A!=null&&A.length)){const M="Couldn't extract ID from Card title. Can't sync!";return miro.board.notifications.showError(M),console.error(M),{appCardId:T.id,itemId:""}}const C=A[1];return{appCardId:T.id,itemId:C}});E(N),h({page:ce,pageSize:Ce,queryString:`item.id IN (${N.map(u=>u.itemId).join(",")})`})};return e.useEffect(()=>{m.error&&l(!1),m.data&&(async N=>{var T,A;const u=structuredClone(N);for(let C=0;C<u.length;C++){if((T=u[C].categories)!=null&&T.length&&u[C].categories.find(B=>B.name=="Folder"||B.name=="Information"))continue;const M=(A=x.find(B=>B.itemId==u[C].id.toString()))==null?void 0:A.appCardId;if(!M){miro.board.notifications.showError(`Failed updating card for Item ${u[C].name}`);continue}await Ve(u[C],M,!0)}})(m.data.items).then(()=>{l(!1),i(!0),setTimeout(()=>{i(!1)},2e3)})},[m]),e.createElement("div",{className:"flex-col"},e.createElement("div",null,e.createElement("p",{className:"muted-medium"},"Select the properties you want to be displayed as Tags on the imported Items' Cards.",e.createElement("br",null),"Items that don't have a selected property won't display the tag for it.")),e.createElement("div",{className:"my-2 grid"},e.createElement("div",{className:"cs1 ce6 border-right-light"},p.map(d=>e.createElement("div",{className:"property",key:d},e.createElement("label",{className:"checkbox",title:"Default property","data-test":`defaultTag-${d}`},e.createElement("input",{type:"checkbox",disabled:!0,checked:!0}),e.createElement("span",{className:"muted-medium"},d)))),S.filter((d,N)=>N%2==1).map(d=>g(d))),e.createElement("div",{className:"cs7 ce12"},S.filter((d,N)=>N%2==0).map(d=>g(d)))),e.createElement("div",{className:"text-center"},!c&&e.createElement("button",{className:`button button-primary button-small mt-5 ${o?"button-loading":""}`,onClick:()=>v(),"data-test":"apply"},"Apply"),c&&e.createElement("span",null,e.createElement("svg",{className:"checkmark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52"},e.createElement("circle",{className:"checkmark__circle",cx:"26",cy:"26",r:"25",fill:"none"}),e.createElement("path",{className:"checkmark__check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})))),e.createElement("hr",null),e.createElement("div",{className:"align-self-center mt-3"},e.createElement("h3",{className:"h3"},"Card Preview"),e.createElement("div",{className:"app-card"},e.createElement("h1",{className:"app-card--title"},e.createElement("a",{href:"#"},"Sample Item [TRKR-1248]")),e.createElement("h1",{className:"app-card--description p-medium"},"The Item's description will be rendered as HTML, as far as supported by Miro."),e.createElement("div",{className:"app-card--body"},e.createElement("div",{className:"app-card--tags"},n.map(d=>e.createElement("span",{className:"tag",key:d,style:{color:"#ffffff",backgroundColor:At(d)}},d,": ",Ca[d]))),e.createElement("svg",{className:"app-card--app-logo",enableBackground:"new 0 0 256 256",version:"1.1",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},e.createElement("path",{d:"m142.7 103.9c1.4 12.6 2.6 29.3 21.5 18.5 0.5-0.2 0.9-0.5 1.2-0.7 4.5-6.7-0.2-20.9 5.1-20 5.9 1-1.2 7.6 1.8 12.7 3.1-2.1 3.6-11 7.9-8.3 4.2 2.6-3.4 5.6-3.7 8.9 2.7 1.4 10.4-6 11.4-0.7 0.9 4-9.3 3.4-10.3 5.4 2.1 3.3 12.7 0.7 10.1 6-2.2 4.4-9.4-3.3-13.6-2 1.2 3.7 8.9 4.4 5.7 8-2.9 3.3-6.8-2.5-11.7-7.1-0.6 0.7-1.2 1.4-1.9 2.1-11.9 11.9-26 8.9-33.2-3.5-3.5-6-3.3-9.7-4.3-16.2-1.3 4-2.2 7.8-2.6 11.6-10.5 9.2-19.8 19.1-22.8 34.2 7-5.5 13.6-13.1 20.4-9.8 6.4 3.1 11.4 12.6 13.6 20.2 6.1-2.8 11.2-5.8 12.8-1.6 1.9 5.3-6.8 2.8-9.6 6.4 4 3.1 15.1-2.4 15.7 3.3 0.7 6.9-9.9-0.4-13.6 2.4 0.3 2.6 11.6 6.1 9.1 10.1-3.4 5.3-8.9-5.9-12.3-5.6-1.1 3.8 5.9 10.1 0.3 11.3-5.9 1.2-2.7-8.7-5.2-12.3-5.4 4.2-0.3 14.4-7.2 13.1-6-1.2 4-13.8 2.9-23-2.8-3.3-5.9-6.5-8.9-5.4-6.3 2.5-6.7 9.3-17.9 13.6 8.8 17 33.4 33.9 57.1 32.4 21.4-1.4 46-18.3 36.6-55.5-1.2-4.7-1-6.5 2.1-0.7 14.2 26.8-4.8 72.1-54.3 66.8-58.6-6.2-63.2-56.8-81.2-61.2-4-1-8.1 3.1-11.7 6.2 0.4 8.3 5.1 17.8-0.4 18.4-5.2 0.6-1-6.8-3.7-10.1-3.7 2.9-1.1 14.3-6.5 13.5-6.4-0.9 2.6-8.9 0.8-12.8-2.5-0.3-8.1 9.2-11.2 6-4.2-4.3 7.3-6.7 7.7-9.9-3.2-1.8-10.6 3.2-10.4-2.2 0.2-5.5 8.5-0.5 12.4-2-2.7-5.9-13.1-3.5-10.4-9.5 1.8-3.9 7.4 1.8 13.8 5.3 2-8.1 11.3-21.4 18-21.9 5.4-0.4 9.9 4.1 14.4 8.9-0.2-2.6-0.2-5.2-0.1-7.9 0.5-24.5 9.5-46.2 44.9-61.1 1.4-10.4-9.9-13.4-8-20.8 1.6-5.7 9.5-10.9 16.3-12.7-2.9-5.5-6.5-10.2-2.8-11.9 4.4-2 2.8 5.7 6.1 7.8 2.4-3.6-3-12.7 1.9-13.6 5.8-1 0.2 8.4 2.9 11.4 2.2-0.4 4.4-10.3 8-8.4 4.8 2.6-4.5 7.9-3.9 10.8 3.3 0.7 8.2-5.7 9.6-1 1.4 4.9-7.3 2.8-10.2 5.2 3.9 4.4 12.3-0.5 11.6 5.4-0.6 4.9-10.8-1.8-18.5-1.2-3.3 2.5-7.2 6.1-7 9.4 0.3 5 6.7 9 10.6 13.4 7.4-3.2 6.6-10.9 12-13.8 20-11 51.4 6.3 51.6 14.9 0.1 8.2-17.3 19.7-32.1 23.2-3.5 0.8-6.1-0.5-8.4-1.8-8.8-5.3-11.7 3.1-18.3 9.4",fill:"#000"}))))))}const Ca={ID:"124926",Teams:"Beavers, Zebras",Owner:"aurech",Versions:"PI 3.2",Priority:"Medium","Story Points":"8",Subjects:"A big feature","Start Date":"2022-03-15","End Date":"2022-04-02","Assigned To":"urecha","Assigned At":"2022-03-05","Submitted At":"2022-02-27","Submitted By":"aurech","Modified At":"2022-04-01","Modified By":"urecha"};function Ia(t){const a=[{title:"Card Tags",tab:e.createElement(Sa,null)},{title:"Project",tab:e.createElement(Ke,null)},{title:"Connection",tab:e.createElement(Ge,{headerLess:!0,successAnimation:!0})}];return e.createElement($,{show:!0,centered:!0},e.createElement($.Header,{closeButton:t.onClose!==void 0,onHide:()=>{t.onClose&&t.onClose()}},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ionIcon pos-adjusted-up",viewBox:"0 0 512 512"},e.createElement("title",null,"Settings"),e.createElement("path",{d:"M262.29 192.31a64 64 0 1057.4 57.4 64.13 64.13 0 00-57.4-57.4zM416.39 256a154.34 154.34 0 01-1.53 20.79l45.21 35.46a10.81 10.81 0 012.45 13.75l-42.77 74a10.81 10.81 0 01-13.14 4.59l-44.9-18.08a16.11 16.11 0 00-15.17 1.75A164.48 164.48 0 01325 400.8a15.94 15.94 0 00-8.82 12.14l-6.73 47.89a11.08 11.08 0 01-10.68 9.17h-85.54a11.11 11.11 0 01-10.69-8.87l-6.72-47.82a16.07 16.07 0 00-9-12.22 155.3 155.3 0 01-21.46-12.57 16 16 0 00-15.11-1.71l-44.89 18.07a10.81 10.81 0 01-13.14-4.58l-42.77-74a10.8 10.8 0 012.45-13.75l38.21-30a16.05 16.05 0 006-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 00-6.07-13.94l-38.19-30A10.81 10.81 0 0149.48 186l42.77-74a10.81 10.81 0 0113.14-4.59l44.9 18.08a16.11 16.11 0 0015.17-1.75A164.48 164.48 0 01187 111.2a15.94 15.94 0 008.82-12.14l6.73-47.89A11.08 11.08 0 01213.23 42h85.54a11.11 11.11 0 0110.69 8.87l6.72 47.82a16.07 16.07 0 009 12.22 155.3 155.3 0 0121.46 12.57 16 16 0 0015.11 1.71l44.89-18.07a10.81 10.81 0 0113.14 4.58l42.77 74a10.8 10.8 0 01-2.45 13.75l-38.21 30a16.05 16.05 0 00-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})),e.createElement("h3",{className:"ml-1 h3"},"Settings")),e.createElement($.Body,null,e.createElement(wa,{tabs:a})))}function Ta(){const t=D(),[a,n]=s.exports.useState(!1),{advancedSearch:r}=R(c=>c.userSettings),o=()=>{t(Mt(!r))},l=()=>{n(!0)};return e.createElement(e.Fragment,null,e.createElement("header",{className:"flex flex-spaced"},e.createElement("div",{className:"h1"},e.createElement("svg",{className:"pos-adjusted-up wh-40p",enableBackground:"new 0 0 256 256",version:"1.1",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},e.createElement("path",{d:"m142.7 103.9c1.4 12.6 2.6 29.3 21.5 18.5 0.5-0.2 0.9-0.5 1.2-0.7 4.5-6.7-0.2-20.9 5.1-20 5.9 1-1.2 7.6 1.8 12.7 3.1-2.1 3.6-11 7.9-8.3 4.2 2.6-3.4 5.6-3.7 8.9 2.7 1.4 10.4-6 11.4-0.7 0.9 4-9.3 3.4-10.3 5.4 2.1 3.3 12.7 0.7 10.1 6-2.2 4.4-9.4-3.3-13.6-2 1.2 3.7 8.9 4.4 5.7 8-2.9 3.3-6.8-2.5-11.7-7.1-0.6 0.7-1.2 1.4-1.9 2.1-11.9 11.9-26 8.9-33.2-3.5-3.5-6-3.3-9.7-4.3-16.2-1.3 4-2.2 7.8-2.6 11.6-10.5 9.2-19.8 19.1-22.8 34.2 7-5.5 13.6-13.1 20.4-9.8 6.4 3.1 11.4 12.6 13.6 20.2 6.1-2.8 11.2-5.8 12.8-1.6 1.9 5.3-6.8 2.8-9.6 6.4 4 3.1 15.1-2.4 15.7 3.3 0.7 6.9-9.9-0.4-13.6 2.4 0.3 2.6 11.6 6.1 9.1 10.1-3.4 5.3-8.9-5.9-12.3-5.6-1.1 3.8 5.9 10.1 0.3 11.3-5.9 1.2-2.7-8.7-5.2-12.3-5.4 4.2-0.3 14.4-7.2 13.1-6-1.2 4-13.8 2.9-23-2.8-3.3-5.9-6.5-8.9-5.4-6.3 2.5-6.7 9.3-17.9 13.6 8.8 17 33.4 33.9 57.1 32.4 21.4-1.4 46-18.3 36.6-55.5-1.2-4.7-1-6.5 2.1-0.7 14.2 26.8-4.8 72.1-54.3 66.8-58.6-6.2-63.2-56.8-81.2-61.2-4-1-8.1 3.1-11.7 6.2 0.4 8.3 5.1 17.8-0.4 18.4-5.2 0.6-1-6.8-3.7-10.1-3.7 2.9-1.1 14.3-6.5 13.5-6.4-0.9 2.6-8.9 0.8-12.8-2.5-0.3-8.1 9.2-11.2 6-4.2-4.3 7.3-6.7 7.7-9.9-3.2-1.8-10.6 3.2-10.4-2.2 0.2-5.5 8.5-0.5 12.4-2-2.7-5.9-13.1-3.5-10.4-9.5 1.8-3.9 7.4 1.8 13.8 5.3 2-8.1 11.3-21.4 18-21.9 5.4-0.4 9.9 4.1 14.4 8.9-0.2-2.6-0.2-5.2-0.1-7.9 0.5-24.5 9.5-46.2 44.9-61.1 1.4-10.4-9.9-13.4-8-20.8 1.6-5.7 9.5-10.9 16.3-12.7-2.9-5.5-6.5-10.2-2.8-11.9 4.4-2 2.8 5.7 6.1 7.8 2.4-3.6-3-12.7 1.9-13.6 5.8-1 0.2 8.4 2.9 11.4 2.2-0.4 4.4-10.3 8-8.4 4.8 2.6-4.5 7.9-3.9 10.8 3.3 0.7 8.2-5.7 9.6-1 1.4 4.9-7.3 2.8-10.2 5.2 3.9 4.4 12.3-0.5 11.6 5.4-0.6 4.9-10.8-1.8-18.5-1.2-3.3 2.5-7.2 6.1-7 9.4 0.3 5 6.7 9 10.6 13.4 7.4-3.2 6.6-10.9 12-13.8 20-11 51.4 6.3 51.6 14.9 0.1 8.2-17.3 19.7-32.1 23.2-3.5 0.8-6.1-0.5-8.4-1.8-8.8-5.3-11.7 3.1-18.3 9.4",fill:"#000"})),"codebeamer cards"),e.createElement("div",{className:"actions flex flex-"},e.createElement("button",{className:`mx-1 button-icon-secondary button-icon-small button-icon
						${r?" icon-parameters":""}`,onClick:o,title:r?"Query assistant":"CBQL-String Input","data-test":"search-method"},r?"":e.createElement("i",{"data-test":"cbql-icon"},e.createElement("svg",{width:"24",height:"24",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("text",{fill:"#000000"},e.createElement("tspan",{x:"4",y:"13",textLength:"20"},"CB"),e.createElement("tspan",{x:"4",y:"25"},"QL"))))),e.createElement("button",{className:"button button-secondary button-small mx-1",onClick:l},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ionIcon pos-adjusted-up",viewBox:"0 0 512 512"},e.createElement("title",null,"Settings"),e.createElement("path",{d:"M262.29 192.31a64 64 0 1057.4 57.4 64.13 64.13 0 00-57.4-57.4zM416.39 256a154.34 154.34 0 01-1.53 20.79l45.21 35.46a10.81 10.81 0 012.45 13.75l-42.77 74a10.81 10.81 0 01-13.14 4.59l-44.9-18.08a16.11 16.11 0 00-15.17 1.75A164.48 164.48 0 01325 400.8a15.94 15.94 0 00-8.82 12.14l-6.73 47.89a11.08 11.08 0 01-10.68 9.17h-85.54a11.11 11.11 0 01-10.69-8.87l-6.72-47.82a16.07 16.07 0 00-9-12.22 155.3 155.3 0 01-21.46-12.57 16 16 0 00-15.11-1.71l-44.89 18.07a10.81 10.81 0 01-13.14-4.58l-42.77-74a10.8 10.8 0 012.45-13.75l38.21-30a16.05 16.05 0 006-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 00-6.07-13.94l-38.19-30A10.81 10.81 0 0149.48 186l42.77-74a10.81 10.81 0 0113.14-4.59l44.9 18.08a16.11 16.11 0 0015.17-1.75A164.48 164.48 0 01187 111.2a15.94 15.94 0 008.82-12.14l6.73-47.89A11.08 11.08 0 01213.23 42h85.54a11.11 11.11 0 0110.69 8.87l6.72 47.82a16.07 16.07 0 009 12.22 155.3 155.3 0 0121.46 12.57 16 16 0 0015.11 1.71l44.89-18.07a10.81 10.81 0 0113.14 4.58l42.77 74a10.8 10.8 0 01-2.45 13.75l-38.21 30a16.05 16.05 0 00-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}))),e.createElement("button",{className:"button-icon-secondary button-icon-small button-icon mx-1",onClick:()=>t(Qe(!0)),title:"Latest update informations (version 1.1)"},e.createElement("span",{className:"icon icon-bell clickable"})))),a&&e.createElement(Ia,{onClose:()=>n(!1)}))}function Aa(t){return e.createElement("span",{className:"tag fade-in","data-test":`criteria-${t.filterCriteria.id}`},`${t.showId?t.filterCriteria.id+1+". ":""}${t.filterCriteria.slug}: ${t.filterCriteria.value}`,e.createElement("div",{className:"filter-remove","data-test":`remove-${t.filterCriteria.id}`,onClick:()=>t.onRemove(t.filterCriteria.id)},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ionicon",viewBox:"0 0 512 512"},e.createElement("title",null,"Remove Filter"),e.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"}))))}function Ra(){const t=D(),{activeFilters:a,andOrFilterEnabled:n,andOrFilter:r}=R(c=>c.userSettings),o=c=>{t(Lt(c))},l=()=>{t(Be(!1)),t(Bt())};return e.createElement("div",{className:"grid activeFiltersWrapper"},e.createElement("div",{className:`activeFilters cs1 ${a.length>=2?n?"ce8":"ce9":"ce12"}`},a.map((c,i)=>e.createElement(Aa,{key:`${c.slug}-${c.value}-${c.id}`,showId:n,filterCriteria:c,onRemove:o}))),a.length>=2&&e.createElement("div",{className:`${n?"cs9":"cs10"} ce12`},!n&&e.createElement("span",{className:"link-label fade-in-quick",title:"Add AND/OR logic",onClick:()=>{t(Be(!0)),t(je(r))},"data-test":"showAndOr"},e.createElement("span",{className:"link-label-icon"},"+")," ",e.createElement("span",{className:"link-label-text"},"AND/OR")),n&&e.createElement("div",{className:"fade-in-quick"},e.createElement(ye,{initialValues:{andOrLogic:r!=null?r:""},enableReinitialize:!0,onSubmit:c=>{t(je(c.andOrLogic))},validateOnChange:!0},({errors:c,handleSubmit:i})=>e.createElement("form",{onSubmit:i},e.createElement("div",{className:"grid"},e.createElement("div",{className:"cs1 ce10"},e.createElement(le,{name:"andOrLogic",placeholder:"e.g. (1 OR 2)",className:`input input-small ${c.andOrLogic?"error":"success"}`,"data-test":"andOrInput"})),e.createElement("div",{className:"cs11 ce12"},e.createElement("div",{className:"filter-remove v-align-middle bg-light-indigo",onClick:()=>l(),"data-test":"hideAndOr"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ionicon v-align-sub",viewBox:"0 0 512 512"},e.createElement("title",null,"Cancel"),e.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"}))))))))))}function Ma(){const t=D(),{cbqlString:a}=R(n=>n.userSettings);return e.createElement("div",{className:"fade-in-quick"},e.createElement(ye,{initialValues:{cbql:a},enableReinitialize:!0,validate:n=>{},onSubmit:async n=>{t(jt(n.cbql))}},({values:n,errors:r,touched:o,handleSubmit:l,isSubmitting:c})=>e.createElement("form",{onSubmit:l},e.createElement("div",{className:"form-group"},e.createElement("label",null,"CBQL Input"),e.createElement("div",{className:"input-group"},e.createElement(le,{type:"text",name:"cbql",className:"input","data-test":"cbql"}),e.createElement("span",{className:"input-decoration input-action clickable"},e.createElement("button",{type:"submit",className:"button-icon button-icon-small icon-invitation borderless",title:"Query","data-test":"submit"})))))))}function La(){const t=D(),a=Object.values(Ot),{trackerId:n}=R(c=>c.userSettings),{data:r,error:o,isLoading:l}=$t(n);return e.createElement("div",null,e.createElement(ye,{initialValues:{category:"Team",value:""},validate:c=>{},onSubmit:(c,{setFieldValue:i})=>{var E,h;const x={slug:(h=(E=r==null?void 0:r.find(m=>m.trackerItemField==c.category||m.legacyRestName==c.category))==null?void 0:E.name)!=null?h:c.category,fieldName:c.category,value:c.value};t(Ft(x)),i("value","")}},({values:c,errors:i,touched:x,handleSubmit:E})=>e.createElement("form",{onSubmit:E},e.createElement("label",{className:"form-group-label"},"Filter"),e.createElement("div",{className:"input-group"},e.createElement(le,{as:"select",name:"category",className:"select two-fourth","data-test":"category-select"},a.map((h,m)=>e.createElement("option",{key:m,value:h},h)),e.createElement("option",{value:"-",disabled:!0},"----- Tracker-Fields -----"),r&&r.map((h,m)=>{var y;return e.createElement("option",{key:m,value:(y=h.trackerItemField)!=null?y:h.legacyRestName},h.name)})),e.createElement(le,{type:"text",name:"value",className:"input three-fourth","data-test":"value-input"}),e.createElement("span",{className:`input-decoration input-action clickable ${!c.value&&"input-action-disabled"}`},e.createElement("button",{type:"submit",className:"button-icon button-icon-small icon-filters borderless",title:"Add Filter",disabled:!c.value,"data-test":"submit"}))))))}function Ba(){const t=D(),{projectId:a}=R(i=>i.boardSettings),{trackerId:n}=R(i=>i.userSettings),{data:r,error:o,isLoading:l}=Dt(a),c=i=>{t(We(i.target.value))};return e.useEffect(()=>{l||(document.getElementById("trackerSelect").value=n)},[l]),e.createElement("div",{className:"form-group"},e.createElement("label",{className:"text-center"},"Tracker"),e.createElement("select",{className:"select",onChange:c,"data-test":"trackerSelect",id:"trackerSelect"},e.createElement("option",{value:"0"},"--"),!l&&(r==null?void 0:r.map(i=>e.createElement("option",{value:i.id,key:i.id},i.name)))))}function ja(){const{advancedSearch:t}=R(a=>a.userSettings);return t?e.createElement(Ma,null):e.createElement("div",{className:"grid fade-in-quick"},e.createElement("div",{className:"cs1 ce3"},e.createElement(Ba,null)),e.createElement("div",{className:"cs4 ce7 text-center"},e.createElement(La,null)),e.createElement("div",{className:"cs8 ce12 text-center active-filters-container"},e.createElement(Ra,null)))}class be{constructor(a,n,r=!1){this.id=a,this.name=n,this.selected=r}}function Oa(t){return e.createElement("div",{className:"w-100 flex-row"},e.createElement("button",{className:"button button-primary button-small flex flex-centered",onClick:()=>t.onImportSelected(),disabled:t.selectedCount==0,"data-test":"importSelected"},e.createElement("span",{className:"mr-5p"},e.createElement("svg",{width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M11 12.172L8.707 9.879a1 1 0 00-1.414 1.414L12 16l4.707-4.707a1 1 0 00-1.414-1.414L13 12.172V2.586a1 1 0 10-2 0v9.586zM3 19a1 1 0 100 2h18a1 1 0 100-2H3z",fill:"#fff"}))),"Import Selected (",t.selectedCount,")"),e.createElement("button",{className:"button button-primary button-small flex flex-centered",onClick:()=>t.onImportAll(),"data-test":"importAll"},e.createElement("span",{className:"mr-5p"},e.createElement("svg",{width:"24",height:"24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.createElement("path",{d:"M11 12.172L8.707 9.879a1 1 0 00-1.414 1.414L12 16l4.707-4.707a1 1 0 00-1.414-1.414L13 12.172V2.586a1 1 0 10-2 0v9.586zM3 19a1 1 0 100 2h18a1 1 0 100-2H3z",fill:"#fff"}))),"Import all (",t.totalCount,")"),e.createElement("button",{className:"button button-secondary button-small flex flex-centered",disabled:t.importedItems.length==0,"data-test":"sync",onClick:()=>t.onSync()},e.createElement("span",{className:"icon icon-refresh mr-1 pos-adjusted-down"}),"Sync (",t.importedItems.length,")"))}function $a(t,a){let n=0;return s.exports.Children.map(t,r=>s.exports.isValidElement(r)?a(r,n++):r)}const Pe=1e3,Fa={min:0,max:100,animated:!1,isChild:!1,visuallyHidden:!1,striped:!1};function Da(t,a,n){const r=(t-a)/(n-a)*100;return Math.round(r*Pe)/Pe}function _e({min:t,now:a,max:n,label:r,visuallyHidden:o,striped:l,animated:c,className:i,style:x,variant:E,bsPrefix:h,...m},y){return k.exports.jsx("div",{ref:y,...m,role:"progressbar",className:F(i,`${h}-bar`,{[`bg-${E}`]:E,[`${h}-bar-animated`]:c,[`${h}-bar-striped`]:c||l}),style:{width:`${Da(a,t,n)}%`,...x},"aria-valuenow":a,"aria-valuemin":t,"aria-valuemax":n,children:o?k.exports.jsx("span",{className:"visually-hidden",children:r}):r})}const Ie=s.exports.forwardRef(({isChild:t,...a},n)=>{if(a.bsPrefix=se(a.bsPrefix,"progress"),t)return _e(a,n);const{min:r,now:o,max:l,label:c,visuallyHidden:i,striped:x,animated:E,bsPrefix:h,variant:m,className:y,children:p,...S}=a;return k.exports.jsx("div",{ref:n,...S,className:F(y,h),children:p?$a(p,g=>s.exports.cloneElement(g,{isChild:!0})):_e({min:r,now:o,max:l,label:c,visuallyHidden:i,striped:x,animated:E,bsPrefix:h,variant:m},n)})});Ie.displayName="ProgressBar";Ie.defaultProps=Fa;const nt=Ie,rt=s.exports.forwardRef(({bsPrefix:t,variant:a,animation:n="border",size:r,as:o="div",className:l,...c},i)=>{t=se(t,"spinner");const x=`${t}-${n}`;return k.exports.jsx(o,{ref:i,...c,className:F(l,x,r&&`${x}-${r}`,a&&`text-${a}`)})});rt.displayName="Spinner";const st=rt,ot=()=>{const[t,a]=s.exports.useState([]);return e.useEffect(()=>{miro.board.get({type:"app_card"}).then(n=>{a(n.map(r=>{let o=r;const l=o.title.match(He);if(!(l!=null&&l.length)){const i="Couldn't extract ID from Card title. Can't sync!";return console.error(i),miro.board.notifications.showError(i),{appCardId:o.id,itemId:""}}const c=l[1];return{appCardId:o.id,itemId:c}}))})},[]),t};function Pa(t){var p,S;const{trackerId:a,cbqlString:n}=R(g=>g.userSettings),[r,o]=s.exports.useState(0),l=ot(),{data:c,error:i,isLoading:x}=Ne({page:ce,pageSize:Ce,queryString:`${n}${t.items.length?" AND item.id IN ("+t.items.join(",")+")":""}${l.length?" AND item.id NOT IN ("+l.map(g=>g.itemId)+")":""}`}),{key:E,color:h,error:m,isLoading:y}=Ue(a,{selectFromResult:({data:g,error:v,isLoading:d})=>({key:g==null?void 0:g.keyName,color:g==null?void 0:g.color,error:v,isLoading:d})});return e.useEffect(()=>{i||m?t.onClose:c&&E&&(async v=>{var N;const d=structuredClone(v);for(let u=0;u<d.length;u++){if((N=d[u].categories)!=null&&N.length&&d[u].categories.find(T=>T.name=="Folder"||T.name=="Information")){miro.board.notifications.showInfo(`${d[u].name} is a Folder / Information and will not be imported.`);continue}d[u].tracker.keyName=E,d[u].tracker.color=h,await Pt(d[u]),o(u+1)}await miro.board.ui.closeModal()})(c.items).catch(v=>console.error(v))},[c,E]),e.createElement($,{show:!0,centered:!0},e.createElement($.Header,{closeButton:t.onClose!==void 0,onHide:()=>{t.onClose&&t.onClose()}}),e.createElement($.Body,null,e.createElement("div",{className:"centered w-80"},e.createElement("h5",{className:"h5 text-center"},e.createElement(st,{animation:"grow",variant:"primary"}),e.createElement("br",null),x&&e.createElement("span",null,"Fetching data"),!x&&e.createElement("span",null,"Creating cards")),e.createElement(nt,{className:"w-100",variant:"primary",now:r,max:(p=t.totalItems)!=null?p:t.items.length,label:`${r}/${(S=t.totalItems)!=null?S:t.items.length}`,"data-test":"importProgress"}))))}function _a(t){const a=s.exports.useRef(null);return e.useEffect(()=>{var n;a.current&&(a.current.checked=(n=t.checked)!=null?n:!1)},[]),e.createElement("tr",null,e.createElement("td",null,e.createElement("input",{type:"checkbox",className:"checkBox",onChange:n=>t.onSelect(t.item,n.target.checked),disabled:t.disabled,"data-test":"itemCheck-"+t.item.id,ref:a})),e.createElement("td",{"data-test":"itemId"},t.item.id),e.createElement("td",{"data-test":"itemName"},t.item.name))}function Ha(t){D();const{trackerId:a}=R(m=>m.userSettings),[n,r]=s.exports.useState(0),{data:o,error:l,isLoading:c}=Ne({page:ce,pageSize:Ce,queryString:`item.id IN (${t.items.map(m=>m.itemId).join(",")})`}),{key:i,color:x,error:E,isLoading:h}=Ue(a,{selectFromResult:({data:m,error:y,isLoading:p})=>({key:m==null?void 0:m.keyName,color:m==null?void 0:m.color,error:y,isLoading:p})});return e.useEffect(()=>{l||E||o&&i&&(async y=>{var S,g;const p=structuredClone(y);for(let v=0;v<p.length;v++){if((S=p[v].categories)!=null&&S.length&&p[v].categories.find(N=>N.name=="Folder"||N.name=="Information")){miro.board.notifications.showInfo(`${p[v].name} is a Folder / Information and will not be imported.`);continue}p[v].tracker.keyName=i,p[v].tracker.color=x;const d=(g=t.items.find(N=>N.itemId==p[v].id.toString()))==null?void 0:g.appCardId;if(!d){miro.board.notifications.showError(`Failed updating card for Item ${p[v].name}`);continue}await Ve(p[v],d),r(v+1)}await miro.board.ui.closeModal()})(o.items).catch(y=>console.error(y))},[o,i]),e.createElement($,{show:!0,centered:!0},e.createElement($.Header,{closeButton:t.onClose!==void 0,onHide:()=>{t.onClose&&t.onClose()}}),e.createElement($.Body,null,e.createElement("div",{className:"centered w-80"},e.createElement("h5",{className:"h5 text-center"},e.createElement(st,{animation:"grow",variant:"primary"}),e.createElement("br",null),c&&e.createElement("span",null,"Fetching data"),!c&&e.createElement("span",null,"Syncing cards")),e.createElement(nt,{className:"w-100",variant:"primary",now:n,max:t.items.length,label:`${n}/${t.items.length}`,"data-test":"importProgress"}))))}function Wa(){var H;const[t,a]=s.exports.useState(ce),[n,r]=s.exports.useState([]),[o,l]=s.exports.useState([]),[c,i]=s.exports.useState(!1),[x,E]=s.exports.useState(!1),[h,m]=s.exports.useState(!1),y=ot(),p={root:document.getElementById("queryResultsContainer"),rootMargin:"0px",threshold:1},S=(f,L)=>{!f[0]||!f[0].isIntersecting||(L.unobserve(f[0].target),C())},g=new IntersectionObserver(S,p),{cbqlString:v,trackerId:d,advancedSearch:N}=R(f=>f.userSettings),{data:u,error:T,isLoading:A}=Ne({page:t,pageSize:ka,queryString:v}),C=()=>{u&&(i(n.length>=u.total),n.length<u.total&&a(t+1))},M=(f,L)=>{r(n.map(j=>j.id!=f.id?j:new be(f.id,f.name,L)))};e.useEffect(()=>{r([]),a(1)},[v]),e.useEffect(()=>{g.disconnect()},[d]);//! this should (must, or else it doesn't really work) only trigger when we load another page of query results
e.useEffect(()=>{u&&u.items.length&&(u.page>1?r([...n,...u.items.map(f=>new be(f.id,f.name))]):r(u.items.map(f=>new be(f.id,f.name))))},[u]),e.useEffect(()=>{const f=document.querySelector("#queryResults tbody tr:last-child");f&&g.observe(f)},[n]);const B=()=>{l(n.filter(f=>f.selected).map(f=>f.id.toString())),E(!0)},V=()=>{l([]),E(!0)},G=()=>{m(!0)};return!n.length&&A?e.createElement("div",{className:"centered h-auto"},e.createElement("div",{className:"loading-spinner"})):u&&u.total==0?e.createElement("div",{className:"centered h-auto"},e.createElement("h3",{className:"h3 muted-info","data-test":"noItemsInTracker"},"No Items in this Query")):T?e.createElement("div",{className:"centered h-auto"},e.createElement("h3",{className:"h3 error"},"Invalid query")):d?e.createElement("div",null,e.createElement("table",{className:"table",id:"queryResults","data-test":"resultsTable"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("td",null,"Imported"),e.createElement("td",null,"ID"),e.createElement("td",null,"Name"))),e.createElement("tbody",{"data-test":"tableBody"},n.map(f=>e.createElement(_a,{item:f,key:f.id,checked:y.find(L=>L.itemId==f.id)!==void 0,disabled:y.find(L=>L.itemId==f.id)!==void 0,onSelect:M}))),e.createElement("tfoot",null,e.createElement("tr",{className:"text-center"},!c&&e.createElement("td",{colSpan:3,className:"position-relative loading-spinner loading-spinner-table-end"}),c&&e.createElement("td",{colSpan:3,className:"muted","data-test":"eosInfo"},"End of stream")))),e.createElement(Oa,{selectedCount:n.filter(f=>f.selected).length,totalCount:(H=u==null?void 0:u.total)!=null?H:0,onImportSelected:B,onImportAll:V,onSync:G,importedItems:y}),x&&e.createElement(Pa,{items:o,totalItems:o.length>0?o.length:u==null?void 0:u.total}),h&&e.createElement(Ha,{items:y})):e.createElement("div",{className:"centered"},e.createElement("h3",{className:"h3 muted-color"},"Select a Tracker to load its Items"))}function qa(){return s.exports.createElement("div",{className:"fade-in","data-test":"import"},s.exports.createElement(Ta,null),s.exports.createElement(ja,null),s.exports.createElement(Wa,null))}function za(){const t=D(),[a,n]=s.exports.useState(!1),r=()=>{n(!0),setTimeout(()=>{t(Qe(!1))},200)};return e.createElement("div",{className:`container centered-horizontally announcements ${a?"shrink":"grow"}`,"data-test":"announcements"},e.createElement("span",{className:"close-button mb-3 clickable"},e.createElement("div",{onClick:()=>r(),className:"icon icon-close clickable","data-test":"close-announcements"})),e.createElement("div",{className:"mb-5"},e.createElement("h2",{className:"h2 text-center"},e.createElement("span",{className:"muted"},"2022-12-01"),e.createElement("br",null),e.createElement("svg",{className:"pos-adjusted-up wh-40p",enableBackground:"new 0 0 256 256",version:"1.1",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},e.createElement("path",{d:"m142.7 103.9c1.4 12.6 2.6 29.3 21.5 18.5 0.5-0.2 0.9-0.5 1.2-0.7 4.5-6.7-0.2-20.9 5.1-20 5.9 1-1.2 7.6 1.8 12.7 3.1-2.1 3.6-11 7.9-8.3 4.2 2.6-3.4 5.6-3.7 8.9 2.7 1.4 10.4-6 11.4-0.7 0.9 4-9.3 3.4-10.3 5.4 2.1 3.3 12.7 0.7 10.1 6-2.2 4.4-9.4-3.3-13.6-2 1.2 3.7 8.9 4.4 5.7 8-2.9 3.3-6.8-2.5-11.7-7.1-0.6 0.7-1.2 1.4-1.9 2.1-11.9 11.9-26 8.9-33.2-3.5-3.5-6-3.3-9.7-4.3-16.2-1.3 4-2.2 7.8-2.6 11.6-10.5 9.2-19.8 19.1-22.8 34.2 7-5.5 13.6-13.1 20.4-9.8 6.4 3.1 11.4 12.6 13.6 20.2 6.1-2.8 11.2-5.8 12.8-1.6 1.9 5.3-6.8 2.8-9.6 6.4 4 3.1 15.1-2.4 15.7 3.3 0.7 6.9-9.9-0.4-13.6 2.4 0.3 2.6 11.6 6.1 9.1 10.1-3.4 5.3-8.9-5.9-12.3-5.6-1.1 3.8 5.9 10.1 0.3 11.3-5.9 1.2-2.7-8.7-5.2-12.3-5.4 4.2-0.3 14.4-7.2 13.1-6-1.2 4-13.8 2.9-23-2.8-3.3-5.9-6.5-8.9-5.4-6.3 2.5-6.7 9.3-17.9 13.6 8.8 17 33.4 33.9 57.1 32.4 21.4-1.4 46-18.3 36.6-55.5-1.2-4.7-1-6.5 2.1-0.7 14.2 26.8-4.8 72.1-54.3 66.8-58.6-6.2-63.2-56.8-81.2-61.2-4-1-8.1 3.1-11.7 6.2 0.4 8.3 5.1 17.8-0.4 18.4-5.2 0.6-1-6.8-3.7-10.1-3.7 2.9-1.1 14.3-6.5 13.5-6.4-0.9 2.6-8.9 0.8-12.8-2.5-0.3-8.1 9.2-11.2 6-4.2-4.3 7.3-6.7 7.7-9.9-3.2-1.8-10.6 3.2-10.4-2.2 0.2-5.5 8.5-0.5 12.4-2-2.7-5.9-13.1-3.5-10.4-9.5 1.8-3.9 7.4 1.8 13.8 5.3 2-8.1 11.3-21.4 18-21.9 5.4-0.4 9.9 4.1 14.4 8.9-0.2-2.6-0.2-5.2-0.1-7.9 0.5-24.5 9.5-46.2 44.9-61.1 1.4-10.4-9.9-13.4-8-20.8 1.6-5.7 9.5-10.9 16.3-12.7-2.9-5.5-6.5-10.2-2.8-11.9 4.4-2 2.8 5.7 6.1 7.8 2.4-3.6-3-12.7 1.9-13.6 5.8-1 0.2 8.4 2.9 11.4 2.2-0.4 4.4-10.3 8-8.4 4.8 2.6-4.5 7.9-3.9 10.8 3.3 0.7 8.2-5.7 9.6-1 1.4 4.9-7.3 2.8-10.2 5.2 3.9 4.4 12.3-0.5 11.6 5.4-0.6 4.9-10.8-1.8-18.5-1.2-3.3 2.5-7.2 6.1-7 9.4 0.3 5 6.7 9 10.6 13.4 7.4-3.2 6.6-10.9 12-13.8 20-11 51.4 6.3 51.6 14.9 0.1 8.2-17.3 19.7-32.1 23.2-3.5 0.8-6.1-0.5-8.4-1.8-8.8-5.3-11.7 3.1-18.3 9.4",fill:"#000"})),e.createElement("span",{className:"roche-primary"},"codebeamer-cards Version 1.2 Release")),e.createElement("p",{className:"text-center"},e.createElement("b",null,"Welcome to Version 1.2 of"," ",e.createElement("span",{className:"roche-primary"},"codebeamer-cards")," ","!"),e.createElement("p",{className:"mt-5"},"This release adds some minor improvements and fixes to the Item Details introduced in v1.1.0. See the"," ",e.createElement("a",{href:"https://github.com/codeBeamer-Extensions-and-Addons/codebeamer-miro/blob/master/CHANGELOG.md",target:"_blank",className:"roche-primary-light"},"Changelog")," ","for details."))),e.createElement("hr",null),e.createElement("div",{className:"mb-5"},e.createElement("h2",{className:"h2 text-center"},e.createElement("span",{className:"muted"},"2022-11-23"),e.createElement("br",null),e.createElement("svg",{className:"pos-adjusted-up wh-40p",enableBackground:"new 0 0 256 256",version:"1.1",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24"},e.createElement("path",{d:"m142.7 103.9c1.4 12.6 2.6 29.3 21.5 18.5 0.5-0.2 0.9-0.5 1.2-0.7 4.5-6.7-0.2-20.9 5.1-20 5.9 1-1.2 7.6 1.8 12.7 3.1-2.1 3.6-11 7.9-8.3 4.2 2.6-3.4 5.6-3.7 8.9 2.7 1.4 10.4-6 11.4-0.7 0.9 4-9.3 3.4-10.3 5.4 2.1 3.3 12.7 0.7 10.1 6-2.2 4.4-9.4-3.3-13.6-2 1.2 3.7 8.9 4.4 5.7 8-2.9 3.3-6.8-2.5-11.7-7.1-0.6 0.7-1.2 1.4-1.9 2.1-11.9 11.9-26 8.9-33.2-3.5-3.5-6-3.3-9.7-4.3-16.2-1.3 4-2.2 7.8-2.6 11.6-10.5 9.2-19.8 19.1-22.8 34.2 7-5.5 13.6-13.1 20.4-9.8 6.4 3.1 11.4 12.6 13.6 20.2 6.1-2.8 11.2-5.8 12.8-1.6 1.9 5.3-6.8 2.8-9.6 6.4 4 3.1 15.1-2.4 15.7 3.3 0.7 6.9-9.9-0.4-13.6 2.4 0.3 2.6 11.6 6.1 9.1 10.1-3.4 5.3-8.9-5.9-12.3-5.6-1.1 3.8 5.9 10.1 0.3 11.3-5.9 1.2-2.7-8.7-5.2-12.3-5.4 4.2-0.3 14.4-7.2 13.1-6-1.2 4-13.8 2.9-23-2.8-3.3-5.9-6.5-8.9-5.4-6.3 2.5-6.7 9.3-17.9 13.6 8.8 17 33.4 33.9 57.1 32.4 21.4-1.4 46-18.3 36.6-55.5-1.2-4.7-1-6.5 2.1-0.7 14.2 26.8-4.8 72.1-54.3 66.8-58.6-6.2-63.2-56.8-81.2-61.2-4-1-8.1 3.1-11.7 6.2 0.4 8.3 5.1 17.8-0.4 18.4-5.2 0.6-1-6.8-3.7-10.1-3.7 2.9-1.1 14.3-6.5 13.5-6.4-0.9 2.6-8.9 0.8-12.8-2.5-0.3-8.1 9.2-11.2 6-4.2-4.3 7.3-6.7 7.7-9.9-3.2-1.8-10.6 3.2-10.4-2.2 0.2-5.5 8.5-0.5 12.4-2-2.7-5.9-13.1-3.5-10.4-9.5 1.8-3.9 7.4 1.8 13.8 5.3 2-8.1 11.3-21.4 18-21.9 5.4-0.4 9.9 4.1 14.4 8.9-0.2-2.6-0.2-5.2-0.1-7.9 0.5-24.5 9.5-46.2 44.9-61.1 1.4-10.4-9.9-13.4-8-20.8 1.6-5.7 9.5-10.9 16.3-12.7-2.9-5.5-6.5-10.2-2.8-11.9 4.4-2 2.8 5.7 6.1 7.8 2.4-3.6-3-12.7 1.9-13.6 5.8-1 0.2 8.4 2.9 11.4 2.2-0.4 4.4-10.3 8-8.4 4.8 2.6-4.5 7.9-3.9 10.8 3.3 0.7 8.2-5.7 9.6-1 1.4 4.9-7.3 2.8-10.2 5.2 3.9 4.4 12.3-0.5 11.6 5.4-0.6 4.9-10.8-1.8-18.5-1.2-3.3 2.5-7.2 6.1-7 9.4 0.3 5 6.7 9 10.6 13.4 7.4-3.2 6.6-10.9 12-13.8 20-11 51.4 6.3 51.6 14.9 0.1 8.2-17.3 19.7-32.1 23.2-3.5 0.8-6.1-0.5-8.4-1.8-8.8-5.3-11.7 3.1-18.3 9.4",fill:"#000"})),e.createElement("span",{className:"roche-primary"},"codebeamer-cards Version 1.1 Release")),e.createElement("p",{className:"text-center"},e.createElement("b",null,"Welcome to Version 1.1 of"," ",e.createElement("span",{className:"roche-primary"},"codebeamer-cards")," ","!")),e.createElement("p",{className:"mt-5"},"This release adds the ability for you to"," ",e.createElement("b",null,"edit certain attributes")," of your imported Items"," ",e.createElement("b",null,"right inside Miro"),".",e.createElement("br",null),"We've also fixed a few bugs along the way!"),e.createElement("p",{className:"text-center roche-primary mt-3"},"See below to find out how it works!")),e.createElement("div",null,e.createElement("div",{className:"text-center"},e.createElement("h5",{className:"h5 text-underline"},"Edit an Item"),e.createElement("img",{src:"/src/assets/images/announcements/v1-1-0_edit.gif",alt:"Editing an item in-miro"}),e.createElement("p",{className:"mt-3"},`Open an Item's details-view by clicking the icon on its top right corner. (You may have to first click away the "connect" icon in the same place, which doesn't do anything on its own!)`),e.createElement("p",null,"Then, change any of the following attributes, if your Item / Tracker supports them:",e.createElement("br",null),"Assignee | Team | Version | Subject | Story Points"),e.createElement("p",{className:"mt-3"},e.createElement("em",null,"The updates you make will reflect on the Item's card and on codebeamer once you save.")))),e.createElement("div",null,e.createElement("div",{className:"text-center mt-5"},e.createElement("h5",{className:"h5 text-underline"},"Zoom to the edited Item"),e.createElement("img",{src:"/src/assets/images/announcements/v1-1-0_zoomToCard.gif",alt:"Zoom to card"}),e.createElement("p",{className:"mt-3"},'In case you get lost among your imported cards while editing one - use the "zoom to card" button ("eye"-icon) in the panel header to get taken to it.'))),e.createElement("div",{className:"announcement-actions mt-5 text-center"},e.createElement("h6",{className:"h6"},"Additional resources"),e.createElement("a",{href:"https://github.com/codeBeamer-Extensions-and-Addons/codebeamer-miro/blob/master/CHANGELOG.md",target:"_blank",className:"roche-primary-light"},"Detailed Changelog")," ","|"," ",e.createElement("a",{href:"https://github.com/codeBeamer-Extensions-and-Addons/codebeamer-miro/blob/master/README.md",target:"_blank",className:"roche-primary-light"},"Github Documentation")," ","|"," ",e.createElement("a",{href:"https://retina.roche.com/cb/wiki/1420850",target:"_blank",className:"roche-primary-light"},"Retina Documentation")),e.createElement("div",{className:"skip-button mt-3"},e.createElement("a",{className:"roche-primary-light text-decoration-none clickable",onClick:()=>r(),"data-test":"skip-announcements"},"To the app ->")))}function Va(){const{showAnnouncements:t}=R(o=>o.userSettings),{projectId:a}=R(o=>o.boardSettings),[n,r]=_t();return t?s.exports.createElement(za,null):r||!n?s.exports.createElement("div",{className:"centered"},s.exports.createElement(Ge,{loading:r})):a?s.exports.createElement(qa,null):s.exports.createElement("div",{className:"centered fade-in"},s.exports.createElement(Ke,null))}function Ga(){return s.exports.useEffect(()=>{}),s.exports.createElement(Wt,{store:qt},s.exports.createElement(zt,null,s.exports.createElement(Va,null)),s.exports.createElement(Vt,null))}const Qa=document.getElementById("root"),Ua=Ht(Qa);Ua.render(s.exports.createElement(Ga,null));
